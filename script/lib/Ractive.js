/*
 ractive.min.js v0.5.4
 2014-07-05 - commit 1099eeed

 http://ractivejs.org
 http://twitter.com/RactiveJS

 Released under the MIT License.
 */
!function(fy){var fx=fy.Ractive,fw=function(){var b={el:void 0,append:!1,template:{v:1,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return b}(),fu={linear:function(b){return b},easeIn:function(b){return Math.pow(b,3)},easeOut:function(b){return Math.pow(b-1,3)+1},easeInOut:function(b){return(b/=0.5)<1?0.5*Math.pow(b,3):0.5*(Math.pow(b-2,3)+2)}},fs=[],fq=Object.prototype.hasOwnProperty,fo=function(){var b=Object.prototype.toString;return function(a){return"[object Array]"===b.call(a)}}(),fm=function(){var b=Object.prototype.toString;return function(a){return a&&"[object Object]"===b.call(a)}}(),fk=function(b){return !isNaN(parseFloat(b))&&isFinite(b)},fj=function(j,i,p,o,n){var m,l,k;return j.push(function(){l=j.interpolate}),k=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,m={number:function(e,d){var f;return n(e)&&n(d)?(e=+e,d=+d,f=d-e,f?function(a){return e+a*f}:function(){return e}):null},array:function(g,c){var t,s,r,q;if(!p(g)||!p(c)){return null}for(t=[],s=[],q=r=Math.min(g.length,c.length);q--;){s[q]=l(g[q],c[q])}for(q=r;q<g.length;q+=1){t[q]=g[q]}for(q=r;q<c.length;q+=1){t[q]=c[q]}return function(e){for(var d=r;d--;){t[d]=s[d](e)}return t}},object:function(b,t){var s,r,q,g,d;if(!o(b)||!o(t)){return null}s=[],g={},q={};for(d in b){i.call(b,d)&&(i.call(t,d)?(s.push(d),q[d]=l(b[d],t[d])):g[d]=b[d])}for(d in t){i.call(t,d)&&!i.call(b,d)&&(g[d]=t[d])}return r=s.length,function(f){for(var e,h=r;h--;){e=s[h],g[e]=q[e](f)}return g}},cssLength:function(y,x){var w,v,u,t,s,r,q,h;return 0!==y&&"string"!=typeof y||0!==x&&"string"!=typeof x?null:(w=k.exec(y),v=k.exec(x),u=w?w[2]:"",t=v?v[2]:"",u&&t&&u!==t?null:(q=u||t,s=w?+w[1]:0,r=v?+v[1]:0,h=r-s,h?function(b){return s+b*h+q}:function(){return s+q}))}}}(fs,fq,fo,fm,fk),fi=function(){var b;return b="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),fh=function(e,d){var f=e.indexOf(d);-1!==f&&e.splice(f,1)},fa=function(){function i(b){setTimeout(b,0)}function h(d,c){return function(){for(var a;a=d.shift();){a(c)}}}function n(u,t,s,r){var q;if(t===u){throw new TypeError("A promise's fulfillment handler cannot return the same promise")}if(t instanceof m){t.then(s,r)}else{if(!t||"object"!=typeof t&&"function"!=typeof t){s(t)}else{try{q=t.then}catch(p){return void r(p)}if("function"==typeof q){var o,d,c;d=function(a){o||(o=!0,n(u,a,s,r))},c=function(b){o||(o=!0,r(b))};try{q.call(t,d,c)}catch(p){if(!o){return r(p),void (o=!0)}}}else{s(t)}}}}var m,l={},k={},j={};return"function"==typeof fa?m=fa:(m=function(v){var u,t,s,g,f,e,d=[],c=[],b=l;s=function(o){return function(p){b===l&&(u=p,b=o,t=h(b===k?d:c,u),i(t))}},g=s(k),f=s(j);try{v(g,f)}catch(a){f(a)}return e={then:function(o,q){var p=new m(function(x,w){var r=function(z,y,A){y.push("function"==typeof z?function(B){var D;try{D=z(B),n(p,D,x,w)}catch(C){w(C)}}:A)};r(o,d,x),r(q,c,w),b!==l&&i(t)});return p}},e["catch"]=function(o){return this.then(null,o)},e},m.all=function(b){return new m(function(a,s){var r,q,p,o=[];if(!b.length){return void a(o)}for(p=function(c){b[c].then(function(d){o[c]=d,--r||a(o)},s)},r=q=b.length;q--;){p(q)}})},m.resolve=function(b){return new m(function(a){a(b)})},m.reject=function(b){return new m(function(a,d){d(b)})}),m}(),e9=function(){var b=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(a){return(a||"").replace(b,".$1")}}(),e8=function(b){do{if(b.context){return b.context}}while(b=b.parent);return""},e7=function(d,c){return null===d&&null===c?!0:"object"==typeof d||"object"==typeof c?!1:d===c},e6=function(g,f,j){var i;g.push(function(){return i=g.runloop});var h=function(l,k,o,n,m){this.root=l,this.keypath=k,this.priority=m,this.otherInstance=o,this.otherKeypath=n,this.bind(),this.value=this.root.viewmodel.get(this.keypath)};return h.prototype={setValue:function(b){var c=this;return this.updating||this.counterpart&&this.counterpart.updating?void (this.value=b):void (f(b)&&b._ractive&&b._ractive.setting||j(b,this.value)||(this.updating=!0,i.addViewmodel(this.otherInstance.viewmodel),this.otherInstance.viewmodel.set(this.otherKeypath,b),this.value=b,i.scheduleTask(function(){return c.updating=!1})))},bind:function(){this.root.viewmodel.register(this.keypath,this)},rebind:function(b){this.unbind(),this.keypath=b,this.counterpart.otherKeypath=b,this.bind()},unbind:function(){this.root.viewmodel.unregister(this.keypath,this)}},function(t,s,r,q){var p,o,n,m,l,e;p=r+"="+q,n=t.bindings,n[p]||(n[p]=!0,o=t.instance,m=t.parentFragment.priority,l=new h(s,r,o,q,m),n.push(l),o.twoway&&(e=new h(o,q,s,r,1),n.push(e),l.counterpart=e,e.counterpart=l))}}(fs,fo,e7),e5=function(i,h,n){function m(e,d){var f;if("."===d){return e}if(f=e?e.split("."):[],"../"===d.substr(0,3)){for(;"../"===d.substr(0,3);){if(!f.length){throw new Error(l)}f.pop(),d=d.substring(3)}return f.push(d),f.join(".")}return e?e+d.replace(/^\.\//,"."):d.replace(/^\.\/?/,"")}var l,k;return l='Could not resolve reference - too many "../" prefixes',k={evaluateWrapped:!0},function j(r,q,p){var g,f,d,c,b,a;if(q=i(q),"~/"===q.substr(0,2)){return q.substring(2)}if("."===q.charAt(0)){return m(h(p),q)}f=q.split(".")[0];do{if(g=p.context,g&&(a=!0,b=r.viewmodel.get(g,k),b&&("object"==typeof b||"function"==typeof b)&&f in b)){return g+"."+q}}while(p=p.parent);if(f in r.data||f in r.viewmodel.computations){return q}if(r._parent&&!r.isolated){if(p=r.component.parentFragment,p.indexRefs&&void 0!==(d=p.indexRefs[q])){return r.component.indexRefBindings[q]=q,void r.viewmodel.set(q,d,!0)}c=j(r._parent,q,p),c&&(r.viewmodel.set(q,r._parent.viewmodel.get(c),!0),n(r.component,r._parent,c,q))}return a?void 0!==r.viewmodel.get(q)?q:void 0:q}}(e9,e8,e6),e4=function(g){function f(b){b.detach()}function j(b){b.detachNodes()}function i(b){!b.ready||b.outros.length||b.outroChildren||(b.outrosComplete||(b.parent?b.parent.decrementOutros(b):b.detachNodes(),b.outrosComplete=!0),b.intros.length||b.totalChildren||("function"==typeof b.callback&&b.callback(),b.parent&&b.parent.decrementTotal()))}var h=function(d,c){this.callback=d,this.parent=c,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,c&&c.addChild(this)};return h.prototype={addChild:function(b){this.children.push(b),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,i(this)},decrementTotal:function(){this.totalChildren-=1,i(this)},add:function(d){var c=d.isIntro?this.intros:this.outros;c.push(d)},remove:function(a){var d=a.isIntro?this.intros:this.outros;g(d,a),i(this)},init:function(){this.ready=!0,i(this)},detachNodes:function(){this.detachQueue.forEach(f),this.children.forEach(j)}},h}(fh),e3=function(t,s,r,q,p){function o(){var e,d,f;for(e=0;e<m.viewmodels.length;e+=1){d=m.viewmodels[e],f=d.applyChanges(),f&&d.ractive.fire("change",f)}for(m.viewmodels.length=0,n(),e=0;e<m.views.length;e+=1){m.views[e].update()}for(m.views.length=0,e=0;e<m.tasks.length;e+=1){m.tasks[e]()}return m.tasks.length=0,m.viewmodels.length?o():void 0}function n(){var e,d,f;if(k.length){for(e=k.splice(0,k.length);d=e.pop();){d.keypath||(f=q(d.root,d.ref,d.parentFragment),void 0!==f?d.resolve(f):k.push(d))}}}var m,l,k=[];return l={start:function(e,c){var h,g;return c&&(h=new r(function(b){return g=b})),m={previousBatch:m,transitionManager:new p(g,m&&m.transitionManager),views:[],tasks:[],viewmodels:[]},e&&m.viewmodels.push(e.viewmodel),h},end:function(){o(),m.transitionManager.init(),m=m.previousBatch},addViewmodel:function(b){m?-1===m.viewmodels.indexOf(b)&&m.viewmodels.push(b):b.applyChanges()},registerTransition:function(b){b._manager=m.transitionManager,m.transitionManager.add(b)},addView:function(b){m.views.push(b)},addUnresolved:function(b){k.push(b)},removeUnresolved:function(b){s(k,b)},detachWhenReady:function(b){m.transitionManager.detachQueue.push(b)},scheduleTask:function(b){m?m.tasks.push(b):b()}},t.runloop=l,l}(fs,fh,fa,e5,e4),e2=function(){var b=/^\s*[0-9]+\s*$/;return function(a){return b.test(a)?[]:{}}}(),e1=function(i,h,n){function m(w,v,u){function t(c){var g,f;c.value=v,c.updating||(f=c.ractive,g=c.keypath,c.updating=!0,i.start(f),f.viewmodel.mark(g),i.end(),c.updating=!1)}var s,r,q,p,o,a;if(s=w.obj,r=w.prop,u&&!u.configurable){if("length"===r){return}throw new Error('Cannot use magic mode with property "'+r+'" - object is not configurable')}u&&(q=u.get,p=u.set),o=q||function(){return v},a=function(b){p&&p(b),v=q?q():b,a._ractiveWrappers.forEach(t)},a._ractiveWrappers=[w],Object.defineProperty(s,r,{get:o,set:a,enumerable:!0,configurable:!0})}var l,k;try{Object.defineProperty({},"openMainContainer",{value:0}),l={filter:function(o,c,u){var t,s,r,q,p;return c?(t=c.split("."),s=t.pop(),r=t.join("."),(q=u.viewmodel.wrapped[r])&&!q.magic?!1:(p=u.get(r),n(p)&&/^[0-9]+$/.test(s)?!1:p&&("object"==typeof p||"function"==typeof p))):!1},wrap:function(e,d,f){return new k(e,d,f)}},k=function(o,d,t){var s,r,q,p;return this.magic=!0,this.ractive=o,this.keypath=t,this.value=d,s=t.split("."),this.prop=s.pop(),r=s.join("."),this.obj=r?o.get(r):o.data,q=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),q&&q.set&&(p=q.set._ractiveWrappers)?void (-1===p.indexOf(this)&&p.push(this)):void m(this,d,q)},k.prototype={get:function(){return this.value},reset:function(a){this.updating||(this.updating=!0,this.obj[this.prop]=a,i.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath),this.updating=!1)},set:function(b,d){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=h(b),this.updating=!1),this.obj[this.prop][b]=d)},teardown:function(){var g,f,q,p,o;return this.updating?!1:(g=Object.getOwnPropertyDescriptor(this.obj,this.prop),f=g&&g.set,void (f&&(p=f._ractiveWrappers,o=p.indexOf(this),-1!==o&&p.splice(o,1),p.length||(q=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=q))))}}}catch(j){l=!1}return l}(e3,e2,fo),e0=function(b){return !!b}(e1),eZ={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eY=function(e,d){var f;return f=e?function(b,g){return g&&g!==d.html?document.createElementNS(g,b):document.createElement(b)}:function(b,g){if(g&&g!==d.html){throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information"}return document.createElement(b)}}(fi,eZ),eX=function(){var b="object"==typeof document;return b}(),gi=function(e){var d;try{Object.defineProperty({},"openMainContainer",{value:0}),e&&Object.defineProperty(document.createElement("div"),"openMainContainer",{value:0}),d=Object.defineProperty}catch(f){d=function(h,g,i){h[g]=i.value}}return d}(eX),ga=function(g,f,j){var i;try{try{Object.defineProperties({},{test:{value:0}})}catch(h){throw h}j&&Object.defineProperties(g("div"),{test:{value:0}}),i=Object.defineProperties}catch(h){i=function(b,k){var e;for(e in k){k.hasOwnProperty(e)&&f(b,e,k[e])}}}return i}(eY,gi,eX),f9=function(b){return function(a,h,g){var f;if("string"!=typeof h||!b(g)){throw new Error("Bad arguments")}if(f=+a.get(h)||0,!b(f)){throw new Error("Cannot add to a non-numeric value")}return a.set(h,f+g)}}(fk),f8=function(b){return function(a,d){return b(this,a,void 0===d?1:+d)}}(f9),f6=function(d){var c=/^\.+/;return function(a){return d(a).replace(c,"")}}(e9),f4=["o","ms","moz","webkit"],f2=function(d){var c;return"undefined"==typeof window?c=null:(!function(g,f,j){var i,h;if(!j.requestAnimationFrame){for(i=0;i<g.length&&!j.requestAnimationFrame;++i){j.requestAnimationFrame=j[g[i]+"RequestAnimationFrame"]}j.requestAnimationFrame||(h=j.setTimeout,j.requestAnimationFrame=function(b){var l,k,e;return l=Date.now(),k=Math.max(0,16-(l-f)),e=h(function(){b(l+k)},k),f=l+k,e})}}(d,0,window),c=window.requestAnimationFrame),c}(f4),f0=function(){var b;return b="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}}(),fY=function(g,f,j){var i=[],h={tick:function(){var c,b,a;for(a=f(),j.start(),c=0;c<i.length;c+=1){b=i[c],b.tick(a)||i.splice(c--,1)}j.end(),i.length?g(h.tick):h.running=!1},add:function(a){i.push(a),h.running||(h.running=!0,g(h.tick))},abort:function(k,d){for(var m,l=i.length;l--;){m=i[l],m.root===d&&m.keypath===k&&m.stop()}}};return h}(f2,f0,e3),fW=function(){var d,c={};return d="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(b,e){if(!e){if(c[b]){return}c[b]=!0}console.warn(b)}:function(){}}(),fV=function(){function i(b){return b.trim?b.trim():b.replace(/^\s+/,"").replace(/\s+$/,"")}function h(b){return b.str}var n=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,m=/\/\*.*?\*\//g,l=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,k=/^@media/,j=/\[data-rvcguid="[a-z0-9-]+"]/g;return function(d,c){var b,a;return a=function(w){var v,u,t,s,r,q,p,o,e=[];for(v=[];u=l.exec(w);){v.push({str:u[0],base:u[1],modifiers:u[2]})}for(s='[data-rvcguid="'+c+'"]',r=v.map(h),o=v.length;o--;){p=r.slice(),t=v[o],p[o]=t.base+s+t.modifiers||"",q=r.slice(),q[o]=s+" "+q[o],e.push(p.join(" "),q.join(" "))}return e.join(", ")},b=j.test(d)?d.replace(j,'[data-rvcguid="'+c+'"]'):d.replace(m,"").replace(n,function(f,p){var o,g;return k.test(p)?f:(o=p.split(",").map(i),g=o.map(a).join(", ")+" ",f.replace(p,g))})}}(),fU=function(f){function e(i,c,l){var k,j=c.constructor._guid;(k=h(l.css,l,j)||h(i.css,i,j))&&(c.constructor.css=k)}function h(a,j,i){return a?j.noCssTransform?a:f(a,i):void 0}var g={name:"css",extend:e,init:function(){}};return g}(fV),fT=function(){function b(d,c){return"function"==typeof c&&/_super/.test(d)}return function(a,f,e){return e||b(a,f)?function(){var c,h="_super" in this,g=this._super;return this._super=f,c=a.apply(this,arguments),h&&(this._super=g),c}:a}}(),fS=function(x){function w(g,f,j){var i=j.data||{},h=s(g.prototype.data);return r(h,i)}function v(b,f,e){f.data=w(b,f,e)}function u(b,j,i){var h=i.data,g=w(b,j,i);return"function"==typeof g&&(g=g.call(j,h)||h),j.data=g||{}}function t(d){var c=this.init(d.constructor,d,d);return c?(d.data=c,!0):void 0}function s(d){if("function"!=typeof d||!Object.keys(d).length){return d}var c={};return q(d,c),r(d,c)}function r(d,c){return"function"==typeof c?n(c,d):"function"==typeof d?o(c,d):p(c,d)}function q(f,e,h){for(var g in f){h&&g in e||(e[g]=f[g])}}function p(d,c){return d=d||{},c?(q(c,d,!0),d):d}function o(d,c){return function(f){var b;if(d){b=[];for(var a in d){f&&a in f||b.push(a)}}return f=c.call(this,f)||f,b&&b.length&&(f=f||{},b.forEach(function(e){f[e]=d[e]})),f}}function n(a,f){var e;return e="function"!=typeof f?function(b){p(b,f)}:function(c){return f=x(f,function(){},!0),f.call(this,c)||c},x(a,e)}var m={name:"data",extend:v,init:u,reset:t};return m}(fT),fR={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned'},fQ={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},fP=function(){var d;try{Object.create(null),d=Object.create}catch(c){d=function(){var b=function(){};return function(a,f){var e;return null===a?{}:(b.prototype=a,e=new b,f&&Object.defineProperties(e,f),e)}}()}return d}(),fO={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},fN=function(d){var c=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(b){var a;return(a=b.matchPattern(c))?{t:d.NUMBER_LITERAL,v:a}:null}}(fQ),fM=function(b){return function(a){var d=a.remaining();return"true"===d.substr(0,4)?(a.pos+=4,{t:b.BOOLEAN_LITERAL,v:"true"}):"false"===d.substr(0,5)?(a.pos+=5,{t:b.BOOLEAN_LITERAL,v:"false"}):null}}(fQ),fL=function(){var e,d,f;return e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,d=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,f=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(a){return function(l){var k,j,c,b;for(k=l.pos,j='"',c=!1;!c;){b=l.matchPattern(e)||l.matchPattern(d)||l.matchString(a),b?j+='"'===b?'\\"':"\\'"===b?"'":b:(b=l.matchPattern(f),b?j+="\\u"+("000"+b.charCodeAt(1).toString(16)).slice(-4):c=!0)}return j+='"',JSON.parse(j)}}}(),fK=function(b){return b('"')}(fL),fJ=function(b){return b("'")}(fL),fI=function(e,d,f){return function(c){var b,a;return b=c.pos,c.matchString('"')?(a=f(c),c.matchString('"')?{t:e.STRING_LITERAL,v:a}:(c.pos=b,null)):c.matchString("'")?(a=d(c),c.matchString("'")?{t:e.STRING_LITERAL,v:a}:(c.pos=b,null)):null}}(fQ,fK,fJ),fH={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},fG=function(f,e,h){var g=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(b){var a;return(a=f(b))?g.test(a.v)?a.v:'"'+a.v.replace(/"/g,'\\"')+'"':(a=e(b))?a.v:(a=b.matchPattern(h.name))?a:void 0}}(fI,fN,fH),gA=function(d,c){return function(h){var g,b,a;return g=h.pos,h.allowWhitespace(),b=c(h),null===b?(h.pos=g,null):(h.allowWhitespace(),h.matchString(":")?(h.allowWhitespace(),a=h.readExpression(),null===a?(h.pos=g,null):{t:d.KEY_VALUE_PAIR,k:b,v:a}):(h.pos=g,null))}}(fQ,fG),fB=function(d){return function c(j){var i,h,b,a;return i=j.pos,b=d(j),null===b?null:(h=[b],j.matchString(",")?(a=c(j),a?h.concat(a):(j.pos=i,null)):h)}}(gA),gz=function(d,c){return function(f){var b,a;return b=f.pos,f.allowWhitespace(),f.matchString("{")?(a=c(f),f.allowWhitespace(),f.matchString("}")?{t:d.OBJECT_LITERAL,m:a}:(f.pos=b,null)):(f.pos=b,null)}}(fQ,fB),f7=function(d){return function c(l){function k(e){i.push(e)}var j,i,b,a;return j=l.pos,l.allowWhitespace(),b=l.readExpression(),null===b?null:(i=[b],l.allowWhitespace(),l.matchString(",")&&(a=c(l),null===a&&l.error(d.expectedExpression),a.forEach(k)),i)}}(fO),fv=function(d,c){return function(f){var b,a;return b=f.pos,f.allowWhitespace(),f.matchString("[")?(a=c(f),f.matchString("]")?{t:d.ARRAY_LITERAL,m:a}:(f.pos=b,null)):(f.pos=b,null)}}(fQ,f7),eQ=function(g,f,j,i,h){return function(b){var a=g(b)||f(b)||j(b)||i(b)||h(b);return a}}(fN,fM,fI,gz,fv),eE=function(i,h){var n,m,l,k,j;return n=/^\.[a-zA-Z_$0-9]+/,l=function(d){var c=d.matchPattern(m);return c?"."+c:null},m=/^\[(0|[1-9][0-9]*)\]/,k=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,j=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,function(o){var g,f,e,c,b,a,p;if(g=o.pos,o.matchString("~/")){f="~/"}else{for(f="";o.matchString("../");){f+="../"}}if(f||(c=o.matchString(".")||""),e=o.matchPattern(/^@(?:index|key)/)||o.matchPattern(h.name)||"",j.test(e)){return o.pos=g,null}if(!f&&!c&&k.test(e)){return{t:i.GLOBAL,v:e}}if(b=(f||c)+e,!b){return null}for(;a=o.matchPattern(n)||l(o);){b+=a}return o.matchString("(")&&(p=b.lastIndexOf("."),-1!==p?(b=b.substr(0,p),o.pos=g+b.length):o.pos-=1),{t:i.REFERENCE,n:b.replace(/^this\./,"./").replace(/^this$/,".")}}}(fQ,fH),es=function(d,c){return function(f){var b,a;return b=f.pos,f.matchString("(")?(f.allowWhitespace(),a=f.readExpression(),a||f.error(c.expectedExpression),f.allowWhitespace(),f.matchString(")")||f.error(c.expectedParen),{t:d.BRACKETED,x:a}):null}}(fQ,fO),ea=function(e,d,f){return function(a){return e(a)||d(a)||f(a)}}(eQ,eE,es),dY=function(e,d,f){return function(h){var c,b,a;if(c=h.pos,h.allowWhitespace(),h.matchString(".")){if(h.allowWhitespace(),b=h.matchPattern(f.name)){return{t:e.REFINEMENT,n:b}}h.error("Expected a property name")}return h.matchString("[")?(h.allowWhitespace(),a=h.readExpression(),a||h.error(d.expectedExpression),h.allowWhitespace(),h.matchString("]")||h.error("Expected ']'"),{t:e.REFINEMENT,x:a}):null}}(fQ,fO,fH),dM=function(g,f,j,i,h){return function(e){var d,c,b,a;if(c=f(e),!c){return null}for(;c;){if(d=e.pos,b=i(e)){c={t:g.MEMBER,x:c,r:b}}else{if(!e.matchString("(")){break}e.allowWhitespace(),a=j(e),e.allowWhitespace(),e.matchString(")")||e.error(h.expectedParen),c={t:g.INVOCATION,x:c},a&&(c.o=a)}}return c}}(fQ,ea,f7,dY,fO),dB=function(g,f,j){var i,h;return h=function(b,a){return function(d){var c;return(c=a(d))?c:d.matchString(b)?(d.allowWhitespace(),c=d.readExpression(),c||d.error(f.expectedExpression),{s:b,o:c,t:g.PREFIX_OPERATOR}):null}},function(){var d,c,l,k,e;for(k="! ~ + - typeof".split(" "),e=j,d=0,c=k.length;c>d;d+=1){l=h(k[d],e),e=l}i=e}(),i}(fQ,fO,dM),dp=function(f,e){var h,g;return g=function(a,d){return function(j){var i,c,b;if(c=d(j),!c){return null}for(;;){if(i=j.pos,j.allowWhitespace(),!j.matchString(a)){return j.pos=i,c}if("in"===a&&/[a-zA-Z_$0-9]/.test(j.remaining().charAt(0))){return j.pos=i,c}if(j.allowWhitespace(),b=d(j),!b){return j.pos=i,c}c={t:f.INFIX_OPERATOR,s:a,o:[c,b]}}}},function(){var b,j,i,d,c;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),c=e,b=0,j=d.length;j>b;b+=1){i=g(d[b],c),c=i}h=c}(),h}(fQ,dB),c6=function(e,d,f){return function(j){var i,c,b,a;return(c=d(j))?(i=j.pos,j.allowWhitespace(),j.matchString("?")?(j.allowWhitespace(),b=j.readExpression(),b||j.error(f.expectedExpression),j.allowWhitespace(),j.matchString(":")||j.error('Expected ":"'),j.allowWhitespace(),a=j.readExpression(),a||j.error(f.expectedExpression),{t:e.CONDITIONAL,o:[c,b,a]}):(j.pos=i,c)):null}}(fQ,dp,fO),cU=function(g,f){function j(b){return JSON.stringify(String(b))}function i(k,d){var b,a;if(k.t===g.REFERENCE&&-1===d.indexOf(k.n)&&d.unshift(k.n),a=k.o||k.m){if(f(a)){i(a,d)}else{for(b=a.length;b--;){i(a[b],d)}}}k.x&&i(k.x,d),k.r&&i(k.r,d),k.v&&i(k.v,d)}function h(a,k,e){var c=function(b){return h(a,b,e)};switch(k.t){case g.BOOLEAN_LITERAL:case g.GLOBAL:case g.NUMBER_LITERAL:return k.v;case g.STRING_LITERAL:return j(k.v);case g.ARRAY_LITERAL:return"["+(k.m?k.m.map(c).join(","):"")+"]";case g.OBJECT_LITERAL:return"{"+(k.m?k.m.map(c).join(","):"")+"}";case g.KEY_VALUE_PAIR:return k.k+":"+h(a,k.v,e);case g.PREFIX_OPERATOR:return("typeof"===k.s?"typeof ":k.s)+h(a,k.o,e);case g.INFIX_OPERATOR:return h(a,k.o[0],e)+("in"===k.s.substr(0,2)?" "+k.s+" ":k.s)+h(a,k.o[1],e);case g.INVOCATION:return h(a,k.x,e)+"("+(k.o?k.o.map(c).join(","):"")+")";case g.BRACKETED:return"("+h(a,k.x,e)+")";case g.MEMBER:return h(a,k.x,e)+h(a,k.r,e);case g.REFINEMENT:return k.n?"."+k.n:"["+h(a,k.x,e)+"]";case g.CONDITIONAL:return h(a,k.o[0],e)+"?"+h(a,k.o[1],e)+":"+h(a,k.o[2],e);case g.REFERENCE:return"${"+e.indexOf(k.n)+"}";default:a.error("Expected legal JavaScript")}}return function(e){var d,k=[];return i(e,k),d={r:k,s:h(this,e,k)}}}(fQ,fm),cI=function(j,i,p,o,n){var m,l,k=/^\s+/;return l=function(d){this.name="ParseError",this.message=d;try{throw new Error(d)}catch(c){this.stack=c.stack}},l.prototype=Error.prototype,m=function(f,e){var h,g;for(this.str=f,this.options=e||{},this.pos=0,this.init&&this.init(f,e),h=[];this.pos<this.str.length&&(g=this.read());){h.push(g)}this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(h,e):h},m.prototype={read:function(g){var f,r,q,h;for(g||(g=this.converters),f=this.pos,q=g.length,r=0;q>r;r+=1){if(this.pos=f,h=g[r](this)){return h}}return null},readExpression:function(){return o(this)},flattenExpression:n,getLinePos:function(){var h,g,t,s,r,q;h=this.str.split("\n"),r=-1,s=0;do{t=s,r++,g=h[r],s+=g.length+1}while(s<=this.pos);return q=this.pos-t,{line:r+1,ch:q+1,text:g,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(e){var d,f;throw d=this.getLinePos(),f=e+" at "+d,new l(f)},matchString:function(b){return this.str.substr(this.pos,b.length)===b?(this.pos+=b.length,b):void 0},matchPattern:function(d){var c;return(c=d.exec(this.remaining()))?(this.pos+=c[0].length,c[1]||c[0]):void 0},allowWhitespace:function(){this.matchPattern(k)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},m.extend=function(b){var h,f,c=this;h=function(e,d){m.call(this,e,d)},h.prototype=i(c.prototype);for(f in b){p.call(b,f)&&(h.prototype[f]=b[f])}return h.extend=m.extend,h},j.Parser=m,m}(fs,fP,fq,c6,cU),cr=function(){var d=/^[^\s=]+/,c=/^\s+/;return function(h){var g,b,a;return h.matchString("=")?(g=h.pos,h.allowWhitespace(),(b=h.matchPattern(d))?h.matchPattern(c)?(a=h.matchPattern(d))?(h.allowWhitespace(),h.matchString("=")?[b,a]:(h.pos=g,null)):(h.pos=g,null):null:(h.pos=g,null)):null}}(),ca=[{delimiters:"delimiters",isTriple:!1,isStatic:!1},{delimiters:"tripleDelimiters",isTriple:!0,isStatic:!1},{delimiters:"staticDelimiters",isTriple:!1,isStatic:!0},{delimiters:"staticTripleDelimiters",isTriple:!0,isStatic:!0}],bZ=function(d){var c={"#":d.SECTION,"^":d.INVERTED,"/":d.CLOSING,">":d.PARTIAL,"!":d.COMMENT,"&":d.TRIPLE};return function(b){var e=c[b.str.charAt(b.pos)];return e?(b.pos+=1,e):null}}(fQ),bO=function(b){return{"if":b.SECTION_IF,unless:b.SECTION_UNLESS,"with":b.SECTION_WITH,each:b.SECTION_EACH}}(fQ),bx=null,bl=function(j,i,p){function o(a,h){for(var g,f=[];h.t===j.MEMBER&&h.r.t===j.REFINEMENT;){g=h.r,f.unshift(g.x?g.x.t===j.REFERENCE?g.x:a.flattenExpression(g.x):g.n),h=h.x}return h.t!==j.REFERENCE?null:{r:h.n,m:f}}var n,m=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,l=/^[0-9][1-9]*$/,k=new RegExp("^("+Object.keys(p).join("|")+")\\b");return n=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/,function(x,w){var v,u,h,g,f,e,d,b,a,z,y;if(v=x.pos,h={},z=x[w.delimiters],w.isStatic&&(h.s=!0),w.isTriple){h.t=j.TRIPLE}else{if("!"===x.remaining()[0]&&(e=x.readExpression())&&(h.t=j.INTERPOLATOR,x.allowWhitespace(),x.matchString(z[1])?x.pos-=z[1].length:(x.pos=v,e=null)),!e){if(g=i(x),h.t=g||j.INTERPOLATOR,g===j.SECTION){(f=x.matchPattern(k))&&(h.n=f),x.allowWhitespace()}else{if((g===j.COMMENT||g===j.CLOSING)&&(b=x.remaining(),a=b.indexOf(z[1]),-1!==a)){return h.r=b.substr(0,a),x.pos+=a,h}}}}if(!e&&(x.allowWhitespace(),e=x.readExpression(),b=x.remaining(),b.substr(0,z[1].length)!==z[1]&&":"!==b.charAt(0))){if(u=x.pos,x.pos=v,b=x.remaining(),a=b.indexOf(z[1]),-1!==a){return h.r=b.substr(0,a).trim(),n.test(h.r)||x.error("Expected a legal Mustache reference"),x.pos+=a,h}x.pos=u}if(e){for(;e.t===j.BRACKETED&&e.x;){e=e.x}e.t===j.REFERENCE?h.r=e.n:e.t===j.NUMBER_LITERAL&&l.test(e.v)?h.r=e.v:(y=o(x,e))?h.rx=y:h.x=x.flattenExpression(e)}return(d=x.matchPattern(m))&&(h.i=d),h}}(fQ,bZ,bO,bx),a3=function(z,y,x,w,v){function u(e){var c;return c=x.slice().sort(function(a,d){return e[d.delimiters][0].length-e[a.delimiters][0].length}),function f(a){return a?t(e,a)||f(c.shift()):null}(c.shift())}function t(D,C){var B,A,l,k,h,e,d,b,a,E;if(B=D.pos,A=D.getLinePos(),k=D[C.delimiters],!D.matchString(k[0])){return null}if(l=y(D)){return D.matchString(k[1])?(D[C.delimiters]=l,o):null}if(D.allowWhitespace(),l=w(D,C),null===l){return D.pos=B,null}if(D.allowWhitespace(),D.matchString(k[1])||D.error("Expected closing delimiter '"+k[1]+"' after reference"),l.t===z.COMMENT&&(l.exclude=!0),l.t===z.CLOSING&&(D.sectionDepth-=1,D.sectionDepth<0&&(D.pos=B,D.error("Attempted to close a section that wasn't open"))),p(l)){for(D.sectionDepth+=1,h=[],b=h,e=l.n;a=D.read();){if(a.t===z.CLOSING){e&&a.r!==e&&D.error("Expected {{/"+e+"}}");break}if(a.t===z.INTERPOLATOR&&"else"===a.r){switch(l.n){case"unless":D.error("{{else}} not allowed in {{#unless}}");break;case"with":D.error("{{else}} not allowed in {{#with}}");break;default:b=d=[];continue}}b.push(a)}h.length&&(l.f=h,!l.i&&"each"===l.n&&(E=s(l.f))&&(l.i=E)),d&&d.length&&(l.l=d)}return D.includeLinePositions&&(l.p=A.toJSON()),l.n?l.n=v[l.n]:l.t===z.INVERTED&&(l.t=z.SECTION,l.n=z.SECTION_UNLESS),l}function s(a){var h,g,f;for(h=a.length;h--;){if(g=a[h],g.t===z.ELEMENT&&g.f&&(f=s(g.f))){return f}if(g.t===z.INTERPOLATOR||g.t===z.TRIPLE||g.t===z.SECTION){if(g.r&&n.test(g.r)){return g.r}if(g.x&&(f=r(g.x))){return f}if(g.rx&&(f=q(g.rx))){return f}}}}function r(d){var c;for(c=d.r.length;c--;){if(n.test(d.r[c])){return d.r[c]}}}function q(a){var h,g,f;for(h=a.m.length;h--;){if(f=a.m[h],f.r&&(g=r(f))){return g}if(f.t===z.REFERENCE&&n.test(f.n)){return f.n}}}function p(a){return a.t===z.SECTION||a.t===z.INVERTED}var o={t:z.DELIMCHANGE,exclude:!0},n=/^@(?:index|key)$/;return u}(fQ,cr,ca,bl,bO),aR=function(e){var d="<!--",f="-->";return function(l){var k,j,c,b,a;return k=l.getLinePos(),l.matchString(d)?(c=l.remaining(),b=c.indexOf(f),-1===b&&l.error("Illegal HTML - expected closing comment sequence ('-->')"),j=c.substr(0,b),l.pos+=b+3,a={t:e.COMMENT,c:j},l.includeLinePositions&&(a.p=k.toJSON()),a):null}}(fQ),aF=function(){var b=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return b}(),an=function(g,f){var j,i,h;for(j=f.length;j--;){if(i=g.indexOf(f[j]),!i){return 0}-1!==i&&(!h||h>i)&&(h=i)}return h||-1},gM=function(){function h(b){return b?10===b?32:128>b?b:159>=b?l[b-128]:55296>b?b:57343>=b?65533:65535>=b?b:65533:65533}var g,l,k,j,i;return g={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},l=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],k=new RegExp("&("+Object.keys(g).join("|")+");?","g"),j=/&#x([0-9]+);?/g,i=/&#([0-9]+);?/g,function(b){var a;return a=b.replace(k,function(d,e){return g[e]?String.fromCharCode(g[e]):d}),a=a.replace(j,function(d,e){return String.fromCharCode(h(parseInt(e,16)))}),a=a.replace(i,function(d,e){return String.fromCharCode(h(e))})}}(bx),gt=function(d,c){return function(j){var i,h,b,a;return h=j.remaining(),a=j.inside?"</"+j.inside:"<",j.inside&&!j.interpolate[j.inside]?i=h.indexOf(a):(b=[a,j.delimiters[0],j.tripleDelimiters[0]],j.inAttribute===!0?b.push('"',"'","=",">","`"):j.inAttribute&&b.push(j.inAttribute),i=d(h,b)),i?(-1===i&&(i=h.length),j.pos+=i,c(h.substr(0,i))):null}}(an,gM),bI=function(d){var c=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(b){var a;return b.matchString("</")?(a=b.matchPattern(c))?{t:d.CLOSING_TAG,e:a}:(b.pos-=2,void b.error("Illegal closing tag")):null}}(fQ),br=function(t,s){function r(f){var d,h,g;return f.allowWhitespace(),(h=f.matchPattern(l))?(d={name:h},g=q(f),g&&(d.value=g),d):null}function q(g){var f,j,i,h;return f=g.pos,g.allowWhitespace(),g.matchString("=")?(g.allowWhitespace(),j=g.pos,i=g.sectionDepth,h=n(g,"'")||n(g,'"')||o(g),g.sectionDepth!==i&&(g.pos=j,g.error("An attribute value must contain as many opening section tags as closing section tags")),null===h?(g.pos=f,null):1===h.length&&"string"==typeof h[0]?h[0]:h):(g.pos=f,null)}function p(f){var e,h,g;return e=f.pos,(h=f.matchPattern(k))?(-1!==(g=h.indexOf(f.delimiters[0]))&&(h=h.substr(0,g),f.pos=e+h.length),h):null}function o(b){var f,e;for(b.inAttribute=!0,f=[],e=s(b)||p(b);null!==e;){f.push(e),e=s(b)||p(b)}return f.length?(b.inAttribute=!1,f):null}function n(b,j){var i,h,g;if(i=b.pos,!b.matchString(j)){return null}for(b.inAttribute=j,h=[],g=s(b)||m(b,j);null!==g;){h.push(g),g=s(b)||m(b,j)}return b.matchString(j)?(b.inAttribute=!1,h):(b.pos=i,null)}function m(a,j){var i,h,g;return i=a.pos,g=a.remaining(),h=t(g,[j,a.delimiters[0],a.delimiters[1]]),-1===h&&a.error("Quoted attribute value must have a closing quote"),h?(a.pos+=h,g.substr(0,h)):null}var l=/^[^\s"'>\/=]+/,k=/^[^\s"'=<>`]+/;return r}(an,a3),a9=function(v,u,t){function s(f){var c,h,g;return f.allowWhitespace(),(c=t(f))?(g={key:c},f.allowWhitespace(),f.matchString(":")?(f.allowWhitespace(),(h=f.read())?(g.value=h.v,g):null):null):null}var r,q,p,o,n,m,l;return q={"true":!0,"false":!1,undefined:void 0,"null":null},p=new RegExp("^(?:"+Object.keys(q).join("|")+")"),o=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,n=/\$\{([^\}]+)\}/g,m=/^\$\{([^\}]+)\}/,l=/^\s*$/,r=v.extend({init:function(d,c){this.values=c.values},postProcess:function(b){return 1===b.length&&l.test(this.leftover)?{value:b[0].v}:null},converters:[function(d){var c;return d.values?(c=d.matchPattern(m),c&&d.values.hasOwnProperty(c)?{v:d.values[c]}:void 0):null},function(d){var c;return(c=d.matchPattern(p))?{v:q[c]}:void 0},function(d){var c;return(c=d.matchPattern(o))?{v:+c}:void 0},function(b){var f,e=u(b);return e&&(f=b.values)?{v:e.v.replace(n,function(d,c){return c in f?f[c]:c})}:e},function(e){var d,f;if(!e.matchString("{")){return null}if(d={},e.allowWhitespace(),e.matchString("}")){return{v:d}}for(;f=s(e);){if(d[f.key]=f.value,e.allowWhitespace(),e.matchString("}")){return{v:d}}if(!e.matchString(",")){return null}}return null},function(e){var d,f;if(!e.matchString("[")){return null}if(d=[],e.allowWhitespace(),e.matchString("]")){return{v:d}}for(;f=e.read();){if(d.push(f.v),e.allowWhitespace(),e.matchString("]")){return{v:d}}if(!e.matchString(",")){return null}e.allowWhitespace()}return null}]}),function(e,d){var f=new r(e,{values:d});return f.result}}(cI,fI,fG),aX=function(b){return function(a){var n,m,l,k,j,i;if("string"==typeof a){if(-1===a.indexOf(":")){return a.trim()}a=[a]}for(n={},k=[],j=[];a.length;){if(m=a.shift(),"string"==typeof m){if(l=m.indexOf(":"),-1!==l){l&&k.push(m.substr(0,l)),m.length>l+1&&(j[0]=m.substring(l+1));break}k.push(m)}else{k.push(m)}}return j=j.concat(a),j.length||"string"!=typeof k?(n={n:1===k.length&&"string"==typeof k[0]?k[0]:k},1===j.length&&"string"==typeof j[0]?(i=b("["+j[0]+"]"),n.a=i?i.value:j[0].trim()):n.d=j):n=k,n}}(a9),aL=function(H,G,F,E,D,C,B,A){function z(k){var j,h,g,b,a,I,q,p,o,n,m,l;if(j=k.pos,h=k.getLinePos(),k.inside){return null}if(!k.matchString("<")){return null}if("/"===k.nextChar()){return null}if(g={t:H.ELEMENT},k.includeLinePositions&&(g.p=h.toJSON()),k.matchString("!")&&(g.y=1),g.e=k.matchPattern(x),!g.e){return null}for(w.test(k.nextChar())||k.error("Illegal tag name"),q=function(e,c){var f=c.n||c;t.test(f)&&(k.pos-=f.length,k.error("Cannot use reserved event names (change, reset, teardown, update)")),g.v[e]=c};p=B(k);){(a=s[p.name])?g[a]=A(p.value):(I=u.exec(p.name))?(g.v||(g.v={}),o=A(p.value),q(I[1],o)):k.sanitizeEventAttributes&&v.test(p.name)||(g.a||(g.a={}),g.a[p.name]=p.value||0)}if(k.allowWhitespace(),k.matchString("/")&&(n=!0),!k.matchString(">")){return null}if(b=g.e.toLowerCase(),!n&&!G.test(g.e)){for(("script"===b||"style"===b)&&(k.inside=b),m=[];(l=k.read(y))&&l.t!==H.CLOSING&&l.t!==H.CLOSING_TAG;){m.push(l)}m.length&&(g.f=m)}return k.inside=null,k.sanitizeElements&&-1!==k.sanitizeElements.indexOf(b)?r:g}var y,x=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,w=/^[\s\n\/>]/,v=/^on/,u=/^on-([a-zA-Z$_][a-zA-Z$_0-9\-]+)$/,t=/^(?:change|reset|teardown|update)$/,s={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},r={exclude:!0};return y=[F,E,z,D,C],z}(fQ,aF,a3,aR,gt,bI,br,aX),az=function(){var d=/^[ \t\f\r\n]+/,c=/[ \t\f\r\n]+$/;return function(h,g,b){var a;g&&(a=h[0],"string"==typeof a&&(a=a.replace(d,""),a?h[0]=a:h.shift())),b&&(a=h[h.length-1],"string"==typeof a&&(a=a.replace(c,""),a?h[h.length-1]=a:h.pop()))}}(),ah=function(h){function g(b){return"string"==typeof b}function l(a){return a.t===h.COMMENT||a.t===h.DELIMCHANGE}function k(a){return(a.t===h.SECTION||a.t===h.INVERTED)&&a.f}var j=/^\s*\r?\n/,i=/\r?\n\s*$/;return function(b){var m,f,e,d,c;for(m=1;m<b.length;m+=1){f=b[m],e=b[m-1],d=b[m-2],g(f)&&l(e)&&g(d)&&i.test(d)&&j.test(f)&&(b[m-2]=d.replace(i,"\n"),b[m]=f.replace(j,"")),k(f)&&g(e)&&i.test(e)&&g(f.f[0])&&j.test(f.f[0])&&(b[m-1]=e.replace(i,"\n"),f.f[0]=f.f[0].replace(j,"")),g(f)&&k(e)&&(c=e.f[e.f.length-1],g(c)&&i.test(c)&&j.test(f)&&(e.f[e.f.length-1]=c.replace(i,"\n"),b[m]=f.replace(j,"")))}return b}}(fQ),gG=function(H,G,F,E,D,C,B,A){function z(J,I,q,p,o,l){var i,h,g,a,O,N,M,L,K;for(A(J),i=J.length;i--;){h=J[i],h.exclude?J.splice(i,1):I&&h.t===H.COMMENT&&J.splice(i,1)}for(B(J,p,o),i=J.length;i--;){if(h=J[i],h.f&&(O=q||h.t===H.ELEMENT&&t.test(h.e),O||(g=J[i-1],a=J[i+1],(!g||"string"==typeof g&&r.test(g))&&(N=!0),(!a||"string"==typeof a&&s.test(a))&&(M=!0)),z(h.f,I,O,N,M,l),h.l&&(z(h.l,I,q,N,M,l),l&&(L={t:4,n:H.SECTION_UNLESS,f:h.l},h.r&&(L.r=h.r),h.x&&(L.x=h.x),h.rx&&(L.rx=h.rx),J.splice(i+1,0,L),delete h.l))),h.a){for(K in h.a){h.a.hasOwnProperty(K)&&"string"!=typeof h.a[K]&&z(h.a[K],I,q,l)}}}for(i=J.length;i--;){"string"==typeof J[i]&&("string"==typeof J[i+1]&&(J[i]=J[i]+J[i+1],J.splice(i+1,1)),q||(J[i]=J[i].replace(w," ")),""===J[i]&&J.splice(i,1))}}var y,x,w=/[ \t\f\r\n]+/g,v=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,u=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,t=/^(?:pre|script|style|textarea)$/i,s=/^\s+/,r=/\s+$/;return y=G.extend({init:function(d,c){this.delimiters=c.delimiters||["{{","}}"],this.tripleDelimiters=c.tripleDelimiters||["{{{","}}}"],this.staticDelimiters=c.staticDelimiters||["[[","]]"],this.staticTripleDelimiters=c.staticTripleDelimiters||["[[[","]]]"],this.sectionDepth=0,this.interpolate={script:!c.interpolate||c.interpolate.script!==!1,style:!c.interpolate||c.interpolate.style!==!1},c.sanitize===!0&&(c.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=c.sanitize&&c.sanitize.elements,this.sanitizeEventAttributes=c.sanitize&&c.sanitize.eventAttributes,this.includeLinePositions=c.includeLinePositions},postProcess:function(d,c){return z(d,c.stripComments!==!1,c.preserveWhitespace,!c.preserveWhitespace,!c.preserveWhitespace,c.rewriteElse!==!1),d},converters:[F,E,D,C]}),x=function(j){var i=arguments[1];void 0===i&&(i={});var p,o,n,m,l,k;if(p={v:1},v.test(j)){for(o=j,j="";l=v.exec(o);){if(m=l[1],j+=o.substr(0,l.index),o=o.substring(l.index+l[0].length),k=u.exec(o),!k||k[1]!==m){throw new Error("Inline partials must have a closing delimiter, and cannot be nested")}(n||(n={}))[m]=new y(o.substr(0,k.index),i).result,o=o.substring(k.index+k[0].length)}p.p=n}return p.t=new y(j,i).result,p}}(fQ,cI,a3,aR,aL,gt,az,ah),gn=function(){return function(e,d){var f=e.map(d);return e.forEach(function(g,c){f[g]=f[c]}),f}}(bx),fF=function(e){var d,f;return d=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters"],f=e(d,function(b){return b})}(gn),eW=function(x,w,v,u,t){function s(d){var c=u(m);return c.parse=function(a,e){return r(a,e||d)},c}function r(a,c){if(!v){throw new Error(x.missingParser)}return v(a,c||this.options)}function q(b,f){var e;if(!w){if(f&&f.noThrow){return}throw new Error("Cannot retrieve template #"+b+" as Ractive is not running in a browser.")}if(p(b)&&(b=b.substring(1)),!(e=document.getElementById(b))){if(f&&f.noThrow){return}throw new Error("Could not find template element with id #"+b)}return e.innerHTML}function p(b){return"#"===b.charAt(0)}function o(b){return !("string"==typeof b)}function n(b){return b.defaults&&(b=b.defaults),t.reduce(function(a,d){return a[d]=b[d],a},{})}var m={parse:r,fromId:q,isHashedId:p,isParsed:o,getParseOptions:n,createHelper:s};return m}(fR,eX,gG,fP,fF),eK=function(i,h){function n(e){var d,f=e._config.template;if(f&&f.fn){return d=m(e,f.fn),d=l(d,e),d!==f.result?(f.result=d,d):void 0}}function m(a,f){var e=i.createHelper(i.getParseOptions(a));return f.call(a,a.data,e)}function l(b,a){if("string"==typeof b){"#"===b[0]&&(b=i.fromId(b)),b=h(b,i.getParseOptions(a))}else{if(1!==b.v){throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}}return b}function k(f,e,o){if(e){for(var g in e){(o||!f.hasOwnProperty(g))&&(f[g]=e[g])}}}var j={name:"template",extend:function(f,e,o){var g;"template" in o&&(g=o.template,e.template="function"==typeof g?g:l(g,e))},init:function(e,d,p){var o,f;o="template" in p?p.template:e.prototype.template,"function"==typeof o&&(f=o,o=m(d,f),d._config.template={fn:f,result:o}),o=l(o,d),d.template=o.t,o.p&&k(d.partials,o.p)},reset:function(e){var c,f=n(e);return f?(c=l(f,e),e.template=c.t,k(e.partials,c.p,!0),!0):void 0}};return j}(eW,gG),ey=function(e){function d(g,c){this.name=g,this.useDefaults=c}function f(g,c){var i,h;return(i=c(g))?i:!g.isolated&&(h=g._parent)?f(h,c):void 0}return d.prototype={constructor:d,extend:function(h,g,i){this.configure(this.useDefaults?h.defaults:h,this.useDefaults?g:g.constructor,i)},init:function(h,g,i){this.configure(this.useDefaults?h.defaults:h,g,i)},configure:function(a,n,m){var l,k=this.name,j=m[k];l=e(a[k]);for(var i in j){l[i]=j[i]}n[k]=l},reset:function(h){var g=h[this.name],i=!1;return Object.keys(g).forEach(function(b){var c=g[b];c._fn&&(c._fn.isOwner?g[b]=c._fn:delete g[b],i=!0)}),i},findOwner:function(g,c){return g[this.name].hasOwnProperty(c)?g:this.findConstructor(g.constructor,c)},findConstructor:function(g,c){return g?g[this.name].hasOwnProperty(c)?g:this.findConstructor(g._parent,c):void 0},find:function(g,c){var h=this;return f(g,function(b){return b[h.name][c]})},findInstance:function(g,c){var h=this;return f(g,function(b){return b[h.name][c]?b:void 0})}},d}(fP,bx),em=function(f,e){var h=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],g=f(h,function(b){return new e(b,"computed"===b)});return g}(gn,ey),d4=function(){},dS=function(d){function c(a,h){var g;if(h in a){var f=a[h];g="function"==typeof f?f:function(){return f}}else{g=d}return g}return function(b,h,g){if(!/_super/.test(g)){return g}var f=function(){var e,k=c(f._parent,h),j="_super" in this,i=this._super;return this._super=k,e=g.apply(this,arguments),j?this._super=i:delete this._super,e};return f._parent=b,f._method=g,f}}(d4),dH=function(h,g){function l(a,f,d){if(f in a){if(d in a){throw new Error(k(f,d,!0))}h(k(f,d)),a[d]=a[f]}}function k(e,d,f){return"options."+e+" has been deprecated in favour of options."+d+"."+(f?" You cannot specify both options, please use options."+d+".":"")}function j(b){l(b,"eventDefinitions","events")}function i(b){g(b.adaptors)&&l(b,"adaptors","adapt")}return function(b){j(b),i(b)}}(fW,fo),dv=function(B,A,z,y,x,w,v,u){function t(g,f,j,i,h){r[f][g](j,i,h)}function s(g,c,l,k){u(k),t(g,"data",c,l,k),p.parseOptions.forEach(function(b){b in k&&(l[b]=k[b])});for(var i in k){if(i in z&&!(i in p.parseOptions)&&!(i in r)){var h=k[i];l[i]="function"==typeof h?v(c.prototype,i,h):h}}p.registries.forEach(function(a){a[g](c,l,k)}),t(g,"template",c,l,k),t(g,"css",c,l,k)}var r,q,p;r={data:A,template:y,css:B},q=Object.keys(z).filter(function(b){return !w[b]&&!r[b]&&!x[b]}),p=[].concat(r.data,x,q,w,r.template,r.css);for(var o in r){p[o]=r[o]}return p.keys=Object.keys(z).concat(w.map(function(b){return b.name})).concat(["css"]),p.parseOptions=x,p.registries=w,p.extend=function(e,d,f){s("extend",e,d,f)},p.init=function(e,d,f){s("init",e,d,f),d._config&&(d._config.options=f)},p.reset=function(b){return p.filter(function(a){return a.reset&&a.reset(b)})},p}(fU,fS,fw,eK,fF,em,dS,dH),di=function(h,g,l,k){function j(b){return function(){return b}}var i=function(b,m,e,d){if(b===m){return j(m)}if(d){var c=k.registries.interpolators.find(e,d);if(c){return c(b,m)||j(m)}g('Missing "'+d+'" interpolator. You may need to download a plugin from [TODO]')}return l.number(b,m)||l.array(b,m)||l.object(b,m)||l.cssLength(b,m)||j(m)};return h.interpolate=i,i}(fs,fW,fj,dv),c0=function(f,e,h){var g=function(d){var c;this.startTime=Date.now();for(c in d){d.hasOwnProperty(c)&&(this[c]=d[c])}this.interpolator=h(this.from,this.to,this.root,this.interpolator),this.running=!0};return g.prototype={tick:function(){var l,k,j,i,b,a;return a=this.keypath,this.running?(i=Date.now(),l=i-this.startTime,l>=this.duration?(null!==a&&(e.start(this.root),this.root.viewmodel.set(a,this.to),e.end()),this.step&&this.step(1,this.to),this.complete(this.to),b=this.root._animations.indexOf(this),-1===b&&f("Animation was not found"),this.root._animations.splice(b,1),this.running=!1,!1):(k=this.easing?this.easing(l/this.duration):l/this.duration,null!==a&&(j=this.interpolator(k),e.start(this.root),this.root.viewmodel.set(a,j),e.end()),this.step&&this.step(k,j),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&f("Animation was not found"),this.root._animations.splice(a,1)}},g}(fW,e3,di),cO=function(j,i,p,o,n){function m(c,s,r,q){var h,e,d,a;return s&&(s=p(s)),null!==s&&(a=c.viewmodel.get(s)),o.abort(s,c),j(a,r)?(q.complete&&q.complete(q.to),k):(q.easing&&(h="function"==typeof q.easing?q.easing:c.easing[q.easing],"function"!=typeof h&&(h=null)),e=void 0===q.duration?400:q.duration,d=new n({keypath:s,from:a,to:r,root:c,duration:e,easing:h,interpolator:q.interpolator,step:q.step,complete:q.complete}),o.add(d),c._animations.push(d),d)}var l=function(){},k={stop:l};return function(F,E,D){var C,B,A,z,y,x,w,v,u,g,f,b,H,G;if(C=new i(function(c){B=c}),"object"==typeof F){D=E||{},x=D.easing,w=D.duration,y=[],v=D.step,u=D.complete,(v||u)&&(f={},D.step=null,D.complete=null,g=function(c){return function(a,d){f[c]=d}});for(A in F){F.hasOwnProperty(A)&&((v||u)&&(b=g(A),D={easing:x,duration:w},v&&(D.step=b)),D.complete=u?b:l,y.push(m(this,A,F[A],D)))}return(v||u)&&(G={easing:x,duration:w},v&&(G.step=function(c){v(c,f)}),u&&C.then(function(c){u(c,f)}),G.complete=B,H=m(this,null,null,G),y.push(H)),{stop:function(){for(var c;c=y.pop();){c.stop()}H&&H.stop()}}}return D=D||{},D.complete&&C.then(D.complete),D.complete=B,z=m(this,F,E,D),C.stop=function(){z.stop()},C}}(e7,fa,f6,fY,c0),cx=function(b){return function(){return this.el&&b(this.el.__ractive_instances__,this),this.fragment.detach()}}(fh),cl=function(b){return this.el?this.fragment.find(b):null},b4=function(v,u,t){var s,r,q,p,o,n,m,l;if(v){for(r=t("div"),q=["matches","matchesSelector"],l=function(b){return function(a,d){return a[b](d)}},n=q.length;n--&&!s;){if(p=q[n],r[p]){s=l(p)}else{for(m=u.length;m--;){if(o=u[n]+p.substr(0,1).toUpperCase()+p.substring(1),r[o]){s=l(o);break}}}}s||(s=function(g,e){var j,i,h;for(i=g.parentNode,i||(r.innerHTML="",i=r,g=g.cloneNode(),r.appendChild(g)),j=i.querySelectorAll(e),h=j.length;h--;){if(j[h]===g){return !0}}return !1})}else{s=null}return s}(eX,f4,eY),bT=function(b){return function(a,f){var e=this._isComponentQuery?!this.selector||a.name===this.selector:b(a.node,this.selector);return e?(this.push(a.node||a.instance),f||this._makeDirty(),!0):void 0}}(b4),bC=function(){var e,d,f;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],d=this.selector,f=e.indexOf(d),-1!==f&&(e.splice(f,1),e[d]=null)},cC=function(){function d(f){var e;return(e=f.parentFragment)?e.owner:f.component&&(e=f.component.parentFragment)?e.owner:void 0}function c(a){var f,e;for(f=[a],e=d(a);e;){f.push(e),e=d(e)}return f}return function(x,w){var v,u,t,s,r,q,p,o,n,b;for(v=c(x.component||x._ractive.proxy),u=c(w.component||w._ractive.proxy),t=v[v.length-1],s=u[u.length-1];t&&t===s;){v.pop(),u.pop(),r=t,t=v[v.length-1],s=u[u.length-1]}if(t=t.component||t,s=s.component||s,n=t.parentFragment,b=s.parentFragment,n===b){return q=n.items.indexOf(t),p=b.items.indexOf(s),q-p||v.length-u.length}if(o=r.fragments){return q=o.indexOf(n),p=o.indexOf(b),q-p||v.length-u.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),at=function(b){return function(a,f){var e;return a.compareDocumentPosition?(e=a.compareDocumentPosition(f),2&e?1:-1):b(a,f)}}(cC),gy=function(d,c){return function(){this.sort(this._isComponentQuery?c:d),this._dirty=!1}}(at,cC),f5=function(b){return function(){var a=this;this._dirty||(this._dirty=!0,b.scheduleTask(function(){a._sort()}))}}(e3),ft=function(d){var c=this.indexOf(this._isComponentQuery?d.instance:d);-1!==c&&this.splice(c,1)},eP=function(h,g,l,k,j,i){return function(e,d,c,b){var a=[];return h(a,{selector:{value:d},live:{value:c},_isComponentQuery:{value:b},_test:{value:g}}),c?(h(a,{cancel:{value:l},_root:{value:e},_sort:{value:k},_makeDirty:{value:j},_remove:{value:i},_dirty:{value:!1,writable:!0}}),a):a}}(ga,bT,bC,gy,f5,ft),eD=function(b){return function(a,h){var g,f;return this.el?(h=h||{},g=this._liveQueries,(f=g[a])?h&&h.live?f:f.slice():(f=b(this,a,!!h.live,!1),f.live&&(g.push(a),g["_"+a]=f),this.fragment.findAll(a,f),f)):[]}}(eP),er=function(b){return function(a,h){var g,f;return h=h||{},g=this._liveComponentQueries,(f=g[a])?h&&h.live?f:f.slice():(f=b(this,a,!!h.live,!0),f.live&&(g.push(a),g["_"+a]=f),this.fragment.findAllComponents(a,f),f)}}(eP),d9=function(b){return this.fragment.findComponent(b)},dX=function(g){var f,j,i,h=this._subs[g];if(h){for(f=Array.prototype.slice.call(arguments,1),j=0,i=h.length;i>j;j+=1){h[j].apply(this,f)}}},dL=function(d){var c={capture:!0};return function(a){return a=d(a),this.viewmodel.get(a,c)}}(f6),dA=function(d){var c;if(d&&"boolean"!=typeof d){return"undefined"!=typeof window&&document&&d?d.nodeType?d:"string"==typeof d&&(c=document.getElementById(d),!c&&document.querySelector&&(c=document.querySelector(d)),c&&c.nodeType)?c:d[0]&&d[0].nodeType?d[0]:null:null}},dn=function(b){return function(a,d){if(!this.rendered){throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.")}if(a=b(a),d=b(d)||null,!a){throw new Error("You must specify a valid target to insert into")}a.insertBefore(this.detach(),d),this.el=a,(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this)}}(dA),c5=function(e,d,f){return function(j,i,c){var b,a;return j=f(j),b=this.viewmodel.get(j),d(b)&&d(i)?(a=e.start(this,!0),this.viewmodel.merge(j,b,i,c),e.end(),c&&c.complete&&a.then(c.complete),a):this.set(j,i,c&&c.complete)}}(e3,fo,f6),cT=function(e,d){var f=function(h,g,j,i){this.root=h,this.keypath=g,this.callback=j,this.defer=i.defer,this.debug=i.debug,this.priority=0,this.context=i&&i.context?i.context:h};return f.prototype={init:function(b){this.value=this.root.viewmodel.get(this.keypath),b!==!1&&this.update()},setValue:function(b){var a=this;d(b,this.value)||(this.value=b,this.defer&&this.ready?e.scheduleTask(function(){return a.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1)}},f}(e3,e7),cH=function(b){return function(a,n){function m(r,q){var p,o,h;p=a.viewmodel.wrapped[q]?a.viewmodel.wrapped[q].get():a.get(q);for(o in p){!p.hasOwnProperty(o)||"_ractive"===o&&b(p)||(h=q?q+"."+o:o,r.push(h))}return r}function l(c){return function(d){return d?d+"."+c:c}}var k,j,i;for(k=n.split("."),i=[""];j=k.shift();){"*"===j?i=i.reduce(m,[]):""===i[0]?i[0]=j:i=i.map(l(j))}return i}}(fo),cq=function(b){return function(a,h){var g,f;return g=b(a,h),f={},g.forEach(function(c){f[c]=a.get(c)}),f}}(cH),b9=function(h,g,l){var k,j=/\*/,i=Array.prototype.slice;return k=function(f,e,n,m){this.root=f,this.callback=n,this.defer=m.defer,this.debug=m.debug,this.keypath=e,this.regex=new RegExp("^"+e.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=m&&m.context?m.context:f},k.prototype={init:function(e){var c,f;if(c=l(this.root,this.keypath),e!==!1){for(f in c){c.hasOwnProperty(f)&&this.update(f)}}else{this.values=c}},update:function(a){var c;if(j.test(a)){c=l(this.root,a);for(a in c){c.hasOwnProperty(a)&&this.update(a)}}else{if(!this.root.viewmodel.implicitChanges[a]){return this.defer&&this.ready?void h.addObserver(this.getProxy(a)):void this.reallyUpdate(a)}}},reallyUpdate:function(b){var n,m,f;return n=this.root.viewmodel.get(b),this.updating?void (this.values[b]=n):(this.updating=!0,g(n,this.values[b])&&this.ready||(m=i.call(this.regex.exec(b),1),f=[n,this.values[b],b].concat(m),this.callback.apply(this.context,f),this.values[b]=n),void (this.updating=!1))},getProxy:function(d){var c=this;return this.proxies[d]||(this.proxies[d]={update:function(){c.reallyUpdate(d)}}),this.proxies[d]}},k}(e3,e7,cq),bY=function(g,f,j){var i=/\*/,h={};return function(n,m,e,d){var c,b,a;return m=g(m),d=d||h,i.test(m)?(c=new j(n,m,e,d),n.viewmodel.patternObservers.push(c),b=!0):c=new f(n,m,e,d),n.viewmodel.register(m,c,b?"patternObservers":"observers"),c.init(d.init),c.ready=!0,{cancel:function(){var k;a||(b&&(k=n.viewmodel.patternObservers.indexOf(c),n.viewmodel.patternObservers.splice(k,1),n.viewmodel.unregister(m,c,"patternObservers")),n.viewmodel.unregister(m,c,"observers"),a=!0)}}}}(f6,cT,b9),bN=function(d,c){return function(n,m,l){var k,j,b,a;if(d(n)){l=m,j=n,k=[];for(n in j){j.hasOwnProperty(n)&&(m=j[n],k.push(this.observe(n,m,l)))}return{cancel:function(){for(;k.length;){k.pop().cancel()}}}}if("function"==typeof n){return l=m,m=n,n="",c(this,n,m,l)}if(b=n.split(" "),1===b.length){return c(this,n,m,l)}for(k=[],a=b.length;a--;){n=b[a],n&&k.push(c(this,n,m,l))}return{cancel:function(){for(;k.length;){k.pop().cancel()}}}}}(fm,bY),bw=function(b){return b.trim()},bk=function(b){return""!==b},a2=function(d,c){return function(h,g){var b,a=this;if(h){b=h.split(" ").map(d).filter(c),b.forEach(function(f){var e,i;(e=a._subs[f])&&(g?(i=e.indexOf(g),-1!==i&&e.splice(i,1)):a._subs[f]=[])})}else{for(h in this._subs){delete this._subs[h]}}return this}}(bw,bk),aQ=function(d,c){return function(n,m){var l,k,j,b=this,a=this;if("object"==typeof n){l=[];for(k in n){n.hasOwnProperty(k)&&l.push(this.on(k,n[k]))}return{cancel:function(){for(var e;e=l.pop();){e.cancel()}}}}return j=n.split(" ").map(d).filter(c),j.forEach(function(e){(b._subs[e]||(b._subs[e]=[])).push(m)}),{cancel:function(){a.off(n,m)}}}}(bw,bk),aE=function(e,d,f){switch(d){case"splice":return f;case"sort":case"reverse":return null;case"pop":return e.length?[-1]:null;case"push":return[e.length,0].concat(f);case"shift":return[0,1];case"unshift":return[0,0].concat(f)}},am=function(j,i){var p,o,n,m,l,k;return i?(p=+(i[0]<0?j.length+i[0]:i[0]),m=Math.max(0,i.length-2),l=void 0!==i[1]?i[1]:j.length-p,l=Math.min(l,j.length-p),k=m-l,n=j.length+k,o=k?Math.max(j.length,n):p+m,{rangeStart:p,rangeEnd:o,balance:k,added:m,removed:l}):null},gL=function(g,f,j,i){var h=Array.prototype;return function(a){return function(p){var o,n,e,d,c=Array.prototype.slice,b=c.call(arguments,1);if(o=this.get(p),!g(o)){throw new Error("Called ractive."+a+"('"+p+"'), but '"+p+"' does not refer to an array")}return n=j(o,a,b),e=i(o,n),h[a].apply(o,b),d=f.start(this,!0),e?this.viewmodel.splice(p,e):this.viewmodel.mark(p),f.end(),d}}}(fo,e3,aE,am),gs=function(b){return b("pop")}(gL),bH=function(b){return b("push")}(gL),bq=function(z,y,x){var w,v,u,t,s,r,q,p="/* Ractive.js component styles */\n",o={},n=[];return y?(z.push(function(){u=z.runloop}),t=document.createElement("style"),t.type="text/css",s=document.getElementsByTagName("head")[0],q=!1,r=t.styleSheet,v=function(){var b;n.length?(b=p+n.join(" "),r?r.cssText=b:t.innerHTML=b,q||(s.appendChild(t),q=!0)):q&&(s.removeChild(t),q=!1)},w={add:function(b){b.css&&(o[b._guid]||(o[b._guid]=0,n.push(b.css),u.scheduleTask(v)),o[b._guid]+=1)},remove:function(b){b.css&&(o[b._guid]-=1,o[b._guid]||(x(n,b.css),u.scheduleTask(v)))}}):w=null,w}(fs,eX,fh),a8=function(i,h,n){function m(b){b.init&&b.init(b._config.options),l(b).forEach(m),k[b._guid]=null}function l(b){return k[b._guid]||(k[b._guid]=[])}var k={},j={};return function(e,d){var c,b,a=this;if(j[this._guid]=!0,c=i.start(this,!0),this.rendered){throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first")}return e=n(e)||this.el,d=n(d)||this.anchor,this.el=e,this.anchor=d,this.constructor.css&&h.add(this.constructor),e&&((b=e.__ractive_instances__)?b.push(this):e.__ractive_instances__=[this],d?e.insertBefore(this.fragment.render(),d):e.appendChild(this.fragment.render())),this._parent&&j[this._parent._guid]?l(this._parent).push(this):m(this),j[this._guid]=!1,i.end(),this.rendered=!0,this.complete&&c.then(function(){return a.complete()}),c}}(e3,bq,dA),aW=function(){this.dirtyValue=this.dirtyArgs=!0,this.inited&&this.owner.bubble&&this.owner.bubble()},aK=function(){var b;return 1===this.items.length?this.items[0].detach():(b=document.createDocumentFragment(),this.items.forEach(function(a){b.appendChild(a.detach())}),b)},ay=function(g){var f,j,i,h;if(this.items){for(j=this.items.length,f=0;j>f;f+=1){if(i=this.items[f],i.find&&(h=i.find(g))){return h}}return null}},aa=function(g,f){var j,i,h;if(this.items){for(i=this.items.length,j=0;i>j;j+=1){h=this.items[j],h.findAll&&h.findAll(g,f)}}return f},gF=function(g,f){var j,i,h;if(this.items){for(i=this.items.length,j=0;i>j;j+=1){h=this.items[j],h.findAllComponents&&h.findAllComponents(g,f)}}return f},gm=function(g){var f,j,i,h;if(this.items){for(f=this.items.length,j=0;f>j;j+=1){if(i=this.items[j],i.findComponent&&(h=i.findComponent(g))){return h}}return null}},fE=function(e){var d,f=e.index;return d=this.items[f+1]?this.items[f+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},eV=function(){return this.items&&this.items[0]?this.items[0].firstNode():null},eJ=function(){var b=this;do{if(b.pElement){return b.pElement.node}}while(b=b.parent);return this.root.el},ex=function(f,e){function h(i,c,k,j){return j=j||0,i.map(function(b){var m,l,d;return b.text?b.text:b.fragments?b.fragments.map(function(n){return h(n.items,c,k,j)}).join(""):(m=k+"-"+j++,d=(l=b.root.viewmodel.wrapped[b.keypath])?l.value:b.value,c[m]=d,"${"+m+"}")}).join("")}var g={};return function(t){var s,r,q,p,o,d,c,b,a;return t=t||g,s=t.args,r=s||t.parse,c=s?"argsList":"value",b=s?"dirtyArgs":"dirtyValue",(this[b]||!this.hasOwnProperty(c))&&(1===this.items.length&&this.items[0].type===f.INTERPOLATOR?(q=this.items[0].value,void 0!==q&&(a=s?[q]:q)):(r&&(p={},o=h(this.items,p,this.root._guid),d=e(s?"["+o+"]":o,p)),a=d?d.value:s?[this.toString()]:this.toString()),this[c]=a,this[b]=!1),this[c]}}(fQ,a9),el=function(){var d=/</g,c=/>/g;return function(a){return a.replace(d,"&lt;").replace(c,"&gt;")}}(),d3=function(b){return b&&b.parentNode&&b.parentNode.removeChild(b),b},dR=function(b){return function(){return b(this.node)}}(d3),dG=function(f,e,h){var g=function(a){this.type=f.TEXT,this.text=a.template};return g.prototype={detach:h,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(b){return b?e(this.text):this.text},unrender:function(b){return b?this.detach():void 0}},g}(fQ,el,dR),du=function(b){return function(){this.keypath?this.root.viewmodel.unregister(this.keypath,this):b.removeUnresolved(this),this.resolver&&this.resolver.teardown()}}(e3),dh=function(d){var c=function(a,h,g,f){this.root=a,this.ref=h,this.parentFragment=g,this.resolve=f,d.addUnresolved(this)};return c.prototype={teardown:function(){d.removeUnresolved(this)}},c}(e3),cZ=function(d,c){return d.substr(0,c.length+1)===c+"."},cN=function(b){return function(a,f,e){return a===f?e:b(a,f)?a.replace(f+".",e+"."):void 0}}(cZ),cw=function(g,f){function j(b){var d=f[b.message]||b.message||"";return i(d,b.args)}function i(d,c){return d.replace(/{([^{}]*)}/g,function(b,e){return c[e]})}var h={warn:function(d,c){(d.debug||c)&&this.logger(j(d),d.allowDuplicates)},error:function(b){this.errorOnly(b),b.debug||this.warn(b,!0)},errorOnly:function(b){b.debug&&this.critical(b)},critical:function(d){var c=d.err||new Error(j(d));this.thrower(c)},logger:g,thrower:function(b){throw b}};return h}(fW,fR),ck=function(g,f,j){var i,h;for(i=f.length;i--;){h=f[i],-1===j.indexOf(h)&&g.viewmodel.unregister(h,g,"computed")}for(i=j.length;i--;){h=j[i],-1===f.indexOf(h)&&g.viewmodel.register(h,g,"computed")}g.dependencies=j.slice()},b3=function(r,q,p,o){function n(f,e){var h,g;if(f=f.replace(/\$\{([0-9]+)\}/g,"_$1"),j[f]){return j[f]}for(g=[];e--;){g[e]="_"+e}return h=new Function(g.join(","),"return("+f+")"),j[f]=h,h}function m(f,c){var h,g;return f._noWrap?f:(g="__ractive_"+c._guid,(h=f[g])?h:/this/.test(f.toString())?(p(f,g,{value:f.bind(c)}),f[g]):(p(f,"__ractive_nowrap",{value:f}),f.__ractive_nowrap))}function l(b){return"function"==typeof b?b():b}var k,j={};return k=function(f,e,x,w,v,u){var t=this,s=f.viewmodel;t.root=f,t.viewmodel=s,t.uniqueString=x,t.keypath=e,t.priority=u,t.fn=n(w,v.length),t.explicitDependencies=[],t.dependencies=[],t.argumentGetters=v.map(function(a){var h,g;return a?a.indexRef?g=a.value:(h=a.keypath,t.explicitDependencies.push(h),s.register(h,t,"computed"),function(){var c=s.get(h);return"function"==typeof c?m(c,f):c}):void 0})},k.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1},getValue:function(){var a,h,g;if(a=this.argumentGetters.map(l),!this.updating){this.updating=!0,this.viewmodel.capture();try{h=this.fn.apply(null,a)}catch(d){this.root.debug&&r.warn({debug:this.root.debug,message:"evaluationError",args:{uniqueString:this.uniqueString,err:d.message||d}}),h=void 0}return g=this.viewmodel.release(),o(this,this.dependencies,g),this.updating=!1,h}},update:function(){var b=this.getValue();return q(b,this.value)||(this.value=b,this.root.viewmodel.mark(this.keypath)),this},teardown:function(){var b=this;this.explicitDependencies.concat(this.dependencies).forEach(function(a){return b.viewmodel.unregister(a,b,"computed")}),this.root.viewmodel.evaluators[this.keypath]=null}},k}(cw,e7,gi,ck),bS=function(j,i,p,o,n){function m(d,c){return d.replace(/\$\{([0-9]+)\}/g,function(b,f){var e=c[f];return e?e.indexRef?e.value:e.keypath:"undefined"})}function l(b){return"${"+b.replace(/[\.\[\]]/g,"-")+"}"}var k=function(u,t,s,r){var q,c,b,a=this;return q=u.root,this.root=q,this.callback=r,this.owner=u,this.str=s.s,this.args=b=[],this.unresolved=[],this.pending=0,c=t.indexRefs,s.r&&s.r.length?(s.r.forEach(function(x,w){var v,h,e;return c&&void 0!==(v=c[x])?void (b[w]={indexRef:x,value:v}):(h=i(q,x,t))?void (b[w]={keypath:h}):(b[w]=null,a.pending+=1,e=new p(q,x,t,function(d){a.resolve(w,d),j(a.unresolved,e)}),void a.unresolved.push(e))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return k.prototype={bubble:function(){this.ready&&(this.uniqueString=m(this.str,this.args),this.keypath=l(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},teardown:function(){for(var b;b=this.unresolved.pop();){b.teardown()}},resolve:function(d,c){this.args[d]={keypath:c},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var b=this.root.viewmodel.evaluators[this.keypath];b||(b=new o(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=b),b.update()},rebind:function(g,e,r,q){var h;this.args.forEach(function(b){var a;b&&(b.keypath&&(a=n(b.keypath,r,q))?(b.keypath=a,h=!0):b.indexRef&&b.indexRef===g&&(b.value=e,h=!0))}),h&&this.bubble()}},k}(fh,e5,dh,b3,cN),bB=function(h,g,l,k,j){var i=function(r,q,p){var o,n,e,c,b,a=this;a.resolver=q,a.root=q.root,a.viewmodel=q.root.viewmodel,"string"==typeof r?a.value=r:r.t===h.REFERENCE?(o=a.ref=r.n,(n=p.indexRefs)&&void 0!==(e=n[o])?(a.indexRef=o,a.value=e):(c=q.root,(b=g(c,o,p))?a.resolve(b):a.unresolved=new l(c,o,p,function(d){a.unresolved=null,a.resolve(d)}))):new j(q,p,r,function(d){a.resolve(d)})};return i.prototype={resolve:function(b){this.keypath=b,this.value=this.viewmodel.get(b),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(m,d,p,o){var n;if(m&&this.indexRef===m){if(d!==this.value){return this.value=d,!0}}else{if(this.keypath&&(n=k(this.keypath,p,o))){return this.unbind(),this.keypath=n,this.value=this.root.viewmodel.get(n),this.bind(),!0}}},setValue:function(b){this.value=b,this.resolver.bubble()},unbind:function(){this.keypath&&this.root.viewmodel.unregister(this.keypath,this)},teardown:function(){this.unbind(),this.unresolved&&this.unresolved.teardown()},forceResolution:function(){this.unresolved&&(this.unresolved.teardown(),this.unresolved=null,this.keypath=this.ref,this.value=this.viewmodel.get(this.ref),this.bind())}},i}(fQ,e5,dh,cN,bS),cB=function(i,h,n){function m(b){return b.value}function l(b){return void 0!=b}function k(b){b.unbind()}var j=function(t,s,r){var q,p,o,c,b=this,a=this;c=t.parentFragment,a.root=q=t.root,a.mustache=t,a.priority=t.priority,a.ref=p=s.r,a.callback=r,a.unresolved=[],(o=i(q,p,c))?a.base=o:a.baseResolver=new h(q,p,c,function(d){a.base=d,a.baseResolver=null,a.bubble()}),a.members=s.m.map(function(d){return new n(d,b,c)}),a.ready=!0,a.bubble()};return j.prototype={getKeypath:function(){var b=this.members.map(m);if(b.every(l)&&!this.baseResolver){return this.base+"."+b.join(".")}},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},teardown:function(){this.members.forEach(k)},rebind:function(g,f,q,p){var o;this.members.forEach(function(a){a.rebind(g,f,q,p)&&(o=!0)}),o&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.teardown(),this.baseResolver=null),this.members.forEach(function(b){return b.forceResolution()}),this.bubble()}},j}(e5,dh,bB),ar=function(g,f,j,i,h){return function(r,q){function p(l){var k=r.keypath;l!==k&&(r.resolve(l),void 0!==k&&r.fragments&&r.fragments.forEach(function(m){m.rebind(null,null,k,l)}))}var o,e,d,c,b,a;if(b=q.parentFragment,a=q.template,r.root=b.root,r.parentFragment=b,r.pElement=b.pElement,r.template=q.template,r.index=q.index||0,r.priority=b.priority,r.isStatic=q.template.s,r.type=q.template.t,o=a.r){if(d=b.indexRefs,d&&void 0!==(c=d[o])){return r.indexRef=o,void r.setValue(c)}e=j(r.root,o,r.parentFragment),void 0!==e?r.resolve(e):(r.ref=o,f.addUnresolved(r))}q.template.x&&(r.resolver=new h(r,b,q.template.x,p)),q.template.rx&&(r.resolver=new i(r,q.template.rx,p)),r.template.n!==g.SECTION_UNLESS||r.hasOwnProperty("value")||r.setValue(void 0)}}(fQ,e3,e5,cB,bS),gx=function(f){var e,h,g;void 0!==this.keypath&&(this.root.viewmodel.unregister(this.keypath,this),e=!0),this.keypath=f,void 0!==f&&(h=this.root.viewmodel.get(f),this.root.viewmodel.register(f,this)),this.setValue(h),e&&(g=this.twowayBinding)&&g.rebound()},f3=function(b){return function(a,j,i,h){var g;this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,j,i,h)}),this.resolver&&this.resolver.rebind(a,j,i,h),this.keypath?(g=b(this.keypath,i,h))&&this.resolve(g):void 0!==a&&this.indexRef===a&&this.setValue(j)}}(cN),fr=function(e,d,f){return{init:e,resolve:d,rebind:f}}(ar,gx,f3),eO=function(j,i,p,o,n,m,l){var k=function(a){this.type=j.INTERPOLATOR,m.init(this,a)};return k.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:m.resolve,rebind:m.rebind,detach:l,unbind:n,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(b){b&&o(this.node)},setValue:function(b){var d;(d=this.root.viewmodel.wrapped[this.keypath])&&(b=d.get()),b!==this.value&&(this.value=b,this.parentFragment.bubble(),this.node&&i.addView(this))},firstNode:function(){return this.node},toString:function(d){var c=void 0!=this.value?""+this.value:"";return d?p(c):c}},k}(fQ,e3,el,d3,du,fr,dR),eC=function(){this.parentFragment.bubble()},eq=function(){var b;return 1===this.fragments.length?this.fragments[0].detach():(b=document.createDocumentFragment(),this.fragments.forEach(function(a){b.appendChild(a.detach())}),b)},d8=function(f){var e,h,g;for(h=this.fragments.length,e=0;h>e;e+=1){if(g=this.fragments[e].find(f)){return g}}return null},dW=function(f,e){var h,g;for(g=this.fragments.length,h=0;g>h;h+=1){this.fragments[h].findAll(f,e)}},dK=function(f,e){var h,g;for(g=this.fragments.length,h=0;g>h;h+=1){this.fragments[h].findAllComponents(f,e)}},dz=function(f){var e,h,g;for(h=this.fragments.length,e=0;h>e;e+=1){if(g=this.fragments[e].findComponent(f)){return g}}return null},dm=function(b){return this.fragments[b.index+1]?this.fragments[b.index+1].firstNode():this.parentFragment.findNextNode(this)},c4=function(){var e,d,f;if(e=this.fragments.length){for(d=0;e>d;d+=1){if(f=this.fragments[d].firstNode()){return f}}}return this.parentFragment.findNextNode(this)},cS=function(e,d){var f;return d.push(function(){f=d.Fragment}),function(t){var s,r,q,p,o,n,m,l,a=this;if(s=this.parentFragment,o=[],t.forEach(function(i,g){var v,u,k,j;return i===g?void (o[i]=a.fragments[g]):(v=a.fragments[g],void 0===r&&(r=g),-1===i?(a.fragmentsToUnrender.push(v),void v.unbind()):(u=i-g,k=a.keypath+"."+g,j=a.keypath+"."+i,v.rebind(a.template.i,i,k,j),void (o[i]=v)))}),void 0===r&&(r=this.length),this.length=this.fragments.length=p=this.root.get(this.keypath).length,p!==r){for(e.addView(this),n={template:this.template.f,root:this.root,owner:this},this.template.i&&(n.indexRef=this.template.i),q=r;p>q;q+=1){(m=o[q])?this.docFrag.appendChild(m.detach(!1)):this.fragmentsToCreate.push(q),this.fragments[q]=m}l=s.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,l)}}}(e3,fs),cG=function(){var b;return b=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,b},cp=function(x,w,v,u,t){function s(c,b){var a={template:c.template.f,root:c.root,pElement:c.parentFragment.pElement,owner:c};if(c.template.n){switch(c.template.n){case x.SECTION_IF:return o(c,b,!1,a);case x.SECTION_UNLESS:return o(c,b,!0,a);case x.SECTION_WITH:return p(c,a);case x.SECTION_EACH:if(v(b)){return q(c,b,a)}}}return c.ordered=!!w(b),c.ordered?r(c,b,a):v(b)||"function"==typeof b?c.template.i?q(c,b,a):p(c,a):o(c,b,!1,a)}function r(h,g,l){var k,j,i;if(j=g.length,j===h.length){return !1}if(j<h.length){h.fragmentsToUnrender=h.fragments.splice(j,h.length-j),h.fragmentsToUnrender.forEach(n)}else{if(j>h.length){for(k=h.length;j>k;k+=1){l.context=h.keypath+"."+k,l.index=k,h.template.i&&(l.indexRef=h.template.i),i=new m(l),h.fragmentsToRender.push(h.fragments[k]=i)}}}return h.length=j,!0}function q(j,i,B){var A,z,y,l,k;for(y=j.hasKey||(j.hasKey={}),z=j.fragments.length;z--;){l=j.fragments[z],l.index in i||(k=!0,l.unbind(),j.fragmentsToUnrender.push(l),j.fragments.splice(z,1),y[l.index]=!1)}for(A in i){y[A]||(k=!0,B.context=j.keypath+"."+A,B.index=A,j.template.i&&(B.indexRef=j.template.i),l=new m(B),j.fragmentsToRender.push(l),j.fragments.push(l),y[A]=!0)}return j.length=j.fragments.length,k}function p(e,d){var f;return e.length?void 0:(d.context=e.keypath,d.index=0,f=new m(d),e.fragmentsToRender.push(e.fragments[0]=f),e.length=1,!0)}function o(b,z,y,l){var k,j,i;if(j=w(z)&&0===z.length,k=y?j||!z:z&&!j){if(!b.length){return l.index=0,i=new m(l),b.fragmentsToRender.push(b.fragments[0]=i),b.length=1,!0}if(b.length>1){return b.fragmentsToUnrender=b.fragments.splice(1),b.fragmentsToUnrender.forEach(n),!0}}else{if(b.length){return b.fragmentsToUnrender=b.fragments.splice(0,b.fragments.length),b.fragmentsToUnrender.forEach(n),b.length=0,!0}}}function n(b){b.unbind()}var m;return t.push(function(){m=t.Fragment}),function(f){var d,h,g=this;this.updating||(this.updating=!0,(d=this.root.viewmodel.wrapped[this.keypath])&&(f=d.get()),this.fragmentsToCreate.length?(h={template:this.template.f,root:this.root,pElement:this.pElement,owner:this,indexRef:this.template.i},this.fragmentsToCreate.forEach(function(e){var c;h.context=g.keypath+"."+e,h.index=e,c=new m(h),g.fragmentsToRender.push(g.fragments[e]=c)}),this.fragmentsToCreate.length=0):s(this,f)&&(this.bubble(),this.rendered&&u.addView(this)),this.value=f,this.updating=!1)}}(fQ,fo,fm,e3,fs),b8=function(h,g){function l(b){b.unbind()}function k(f,e){var n,m=[];for(n=f;e>n;n+=1){m.push(n)}return m}function j(u,t,s,r){var q,p,o,n,m;for(o=u.template.i,q=t;s>q;q+=1){p=u.fragments[q],n=u.keypath+"."+(q-r),m=u.keypath+"."+q,p.index=q,p.rebind(o,q,n,m)}}var i;return g.push(function(){i=g.Fragment}),function(a){var o,n,m,e,d,c=this;if(o=a.balance){if(h.addView(c),n=a.rangeStart,c.length+=o,0>o){return c.fragmentsToUnrender=c.fragments.splice(n,-o),c.fragmentsToUnrender.forEach(l),void j(c,n,c.length,o)}m=n+a.removed,e=n+a.added,d=[m,0],d.length+=o,c.fragments.splice.apply(c.fragments,d),j(c,e,c.length,o),c.fragmentsToCreate=k(m,e)}}}(e3,fs),bX=function(f){var e,h,g;for(e="",h=0,g=this.length,h=0;g>h;h+=1){e+=this.fragments[h].toString(f)}return e},bM=function(d){function c(b){b.unbind()}return function(){this.fragments.forEach(c),d.call(this),this.length=0}}(du),bv=function(){function d(b){b.unrender(!0)}function c(b){b.unrender(!1)}return function(a){this.fragments.forEach(a?d:c)}}(),bj=function(){for(var g,f,j,i,h;g=this.fragmentsToUnrender.pop();){g.unrender(!0)}if(this.fragmentsToRender.length){for(this.rendered&&(h=this.parentFragment.getNode());g=this.fragmentsToRender.shift();){f=g.render(),this.docFrag.appendChild(f),this.rendered&&this.ordered&&(j=this.fragments[g.index+1],j&&j.rendered&&h.insertBefore(this.docFrag,j.firstNode()||null))}this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),h.insertBefore(this.docFrag,i))}},a1=function(L,K,J,I,H,G,F,E,D,C,B,A,z,y,x,w,v,u){var t=function(a){this.type=L.SECTION,this.inverted=a.template.n===L.SECTION_UNLESS,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],this.length=0,K.init(this,a)};return t.prototype={bubble:J,detach:I,find:H,findAll:G,findAllComponents:F,findComponent:E,findNextNode:D,firstNode:C,merge:B,rebind:K.rebind,render:A,resolve:K.resolve,setValue:z,splice:y,toString:x,unbind:w,unrender:v,update:u},t}(fQ,fr,eC,eq,d8,dW,dK,dz,dm,c4,cS,cG,cp,b8,bX,bM,bv,bj),aP=function(){var d,c;if(this.docFrag){for(d=this.nodes.length,c=0;d>c;c+=1){this.docFrag.appendChild(this.nodes[c])}return this.docFrag}},aD=function(b){return function(a){var j,i,h,g;for(i=this.nodes.length,j=0;i>j;j+=1){if(h=this.nodes[j],1===h.nodeType){if(b(h,a)){return h}if(g=h.querySelector(a)){return g}}}return null}}(b4),al=function(b){return function(a,p){var o,n,m,l,k,j;for(n=this.nodes.length,o=0;n>o;o+=1){if(m=this.nodes[o],1===m.nodeType&&(b(m,a)&&p.push(m),l=m.querySelectorAll(a))){for(k=l.length,j=0;k>j;j+=1){p.push(l[j])}}}}}(b4),gK=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},gr=function(i,h){function n(b){return k[b]||(k[b]=h(b))}var m,l,k={};try{h("table").innerHTML="foo"}catch(j){m=!0,l={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(s,r,q){var p,o,e,d,c,a=[];if(s){for(m&&(o=l[r.tagName])?(p=n("DIV"),p.innerHTML=o[0]+s+o[1],p=p.querySelector(".x"),"SELECT"===p.tagName&&(e=p.options[p.selectedIndex])):r.namespaceURI===i.svg?(p=n("DIV"),p.innerHTML='<svg class="x">'+s+"</svg>",p=p.querySelector(".x")):(p=n(r.tagName),p.innerHTML=s);d=p.firstChild;){a.push(d),q.appendChild(d)}if(m&&"SELECT"===r.tagName){for(c=a.length;c--;){a[c]!==e&&(a[c].selected=!1)}}}return a}}(eZ,eY),bG=function(e){for(var d=[],f=e.length;f--;){d[f]=e[f]}return d},bp=function(d){function c(b){return b.selected}return function(h){var g,b,a;h&&"select"===h.name&&h.binding&&(g=d(h.node.options).filter(c),h.getAttribute("multiple")?a=g.map(function(e){return e.value}):(b=g[0])&&(a=b.value),void 0!==a&&h.binding.setValue(a),h.bubble())}}(bG),a7=function(d,c){return function(){if(this.rendered){throw new Error("Attempted to render an item that was already rendered")}return this.docFrag=document.createDocumentFragment(),this.nodes=d(this.value,this.parentFragment.getNode(),this.docFrag),c(this.pElement),this.rendered=!0,this.docFrag}}(gr,bp),aV=function(b){return function(a){var d;(d=this.root.viewmodel.wrapped[this.keypath])&&(a=d.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&b.addView(this))}}(e3),aJ=function(){return void 0!=this.value?this.value:""},ax=function(b){return function(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}}(d3),gQ=function(d,c){return function(){var b,a;if(this.rendered){for(;this.nodes&&this.nodes.length;){b=this.nodes.pop(),b.parentNode.removeChild(b)}a=this.parentFragment.getNode(),this.nodes=d(this.value,a,this.docFrag),a.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),c(this.pElement)}}}(gr,bp),gE=function(z,y,x,w,v,u,t,s,r,q,p,o){var n=function(a){this.type=z.TRIPLE,y.init(this,a)};return n.prototype={detach:x,find:w,findAll:v,firstNode:u,rebind:y.rebind,render:t,resolve:y.resolve,setValue:s,toString:r,unbind:o,unrender:q,update:p},n}(fQ,fr,aP,aD,al,gK,a7,aV,aJ,ax,gQ,du),gl=function(){this.parentFragment.bubble()},fD=function(){var d,c=this.node;return c?((d=c.parentNode)&&d.removeChild(c),c):void 0},eU=function(b){return function(a){return b(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0}}(b4),eI=function(d,c){c._test(this,!0)&&c.live&&(this.liveQueries||(this.liveQueries=[])).push(c),this.fragment&&this.fragment.findAll(d,c)},ew=function(d,c){this.fragment&&this.fragment.findAllComponents(d,c)},ek=function(b){return this.fragment?this.fragment.findComponent(b):void 0},d2=function(){return null},dQ=function(){return this.node},dF=function(b){return this.attributes&&this.attributes[b]?this.attributes[b].value:void 0},dt=function(){var f,e,h,g;return f="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),e="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),h=function(i){for(var d={},j=i.length;j--;){d[i[j].toLowerCase()]=i[j]}return d},g=h(f.concat(e)),function(d){var c=d.toLowerCase();return g[c]||c}}(),da=function(d){var c={svg:d.svg,foreignObject:d.html};return function(b,a){return b.a&&b.a.xmlns?b.a.xmlns:c[b.e]||a&&a.namespace||d.html}}(eZ),cY=function(b){return function(){var a=this.fragment.getValue();a!==this.value&&(this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&b.addView(this))}}(e3),cM=function(d,c){return function(h,g){var b,a;if(b=g.indexOf(":"),-1===b||(a=g.substr(0,b),"xmlns"===a)){h.name=h.element.namespace!==d.html?c(g):g}else{if(g=g.substring(b+1),h.name=c(g),h.namespace=d[a.toLowerCase()],!h.namespace){throw'Unknown namespace ("'+a+'")'}}}}(eZ,dt),cv=function(b){return function(a){var d=a.fragment.items;if(1===d.length){return d[0].type===b.INTERPOLATOR?d[0]:void 0}}}(fQ),cj=function(d){var c={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(f,b){var a;!f.pNode||f.namespace||b.pNode.namespaceURI&&b.pNode.namespaceURI!==d.html||(a=c[f.name]||f.name,void 0!==b.pNode[a]&&(f.propertyName=a),("boolean"==typeof b.pNode[a]||"value"===a)&&(f.useProperty=!0))}}(eZ),b2=function(h,g,l,k,j){var i;return j.push(function(){i=j.Fragment}),function(a){return this.type=h.ATTRIBUTE,this.element=a.element,this.root=a.root,g(this,a.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new i({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=l(this),this.isBindable=!!this.interpolator,k(this,a),void (this.ready=!0)):void (this.value=a.value||!0)}}(fQ,cM,cv,cj,fs),bR=function(f,e,h,g){this.fragment&&this.fragment.rebind(f,e,h,g)},bA=function(d){var c={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(b){var a;this.node=b,b.namespaceURI&&b.namespaceURI!==d.html||(a=c[this.name]||this.name,void 0!==b[a]&&(this.propertyName=a),("boolean"==typeof b[a]||"value"===a)&&(this.useProperty=!0),"value"===a&&(this.useProperty=!0,b._ractive.value=this.value)),this.rendered=!0,this.update()}}(eZ),cA=function(){function b(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return function(){var a,f,e;return a=this.name,f=this.value,"value"!==a||"select"!==this.element.name?"name"===a&&"input"===this.element.name&&(e=this.interpolator)?"name={{"+(e.keypath||e.ref)+"}}":"number"==typeof f?a+'="'+f+'"':"string"==typeof f?a+'="'+b(f)+'"':f?a:"":void 0}}(),aq=function(){this.fragment&&this.fragment.unbind()},gw=function(){var g,f,j,i,h=this.value;if(!this.locked){for(this.node._ractive.value=h,g=this.node.options,i=g.length;i--;){if(f=g[i],j=f._ractive?f._ractive.value:f.value,j==h){f.selected=!0;break}}}},f1=function(b){return function(){var a,j,i,h,g=this.value;for(b(g)||(g=[g]),a=this.node.options,j=a.length;j--;){i=a[j],h=i._ractive?i._ractive.value:i.value,i.selected=-1!==g.indexOf(h)}}}(fo),fp=function(){var d=(c=this).node,c=c.value;d.checked=c==d._ractive.value},eN=function(b){return function(){var a,j,i,h,g=this.node;if(a=g.checked,g.value=this.element.getAttribute("value"),g.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!g.checked&&this.element.binding&&(i=this.element.binding.siblings,h=i.length)){for(;h--;){if(j=i[h],!j.element.node){return}if(j.element.node.checked){return b.addViewmodel(j.root.viewmodel),j.handleChange()}}b.addViewmodel(j.root.viewmodel),this.root.viewmodel.set(j.keypath,void 0)}}}(e3),eB=function(b){return function(){var a,d;a=this.node,d=this.value,a.checked=b(d)?-1!==d.indexOf(a._ractive.value):d==a._ractive.value}}(fo),ep=function(){var d,c;d=this.node,c=this.value,void 0===c&&(c=""),d.className=c},d7=function(){var d,c;d=this.node,c=this.value,void 0!==c&&(this.root.nodes[c]=void 0),this.root.nodes[c]=d,d.id=c},dV=function(){var d,c;d=this.node,c=this.value,void 0===c&&(c=""),d.style.setAttribute("cssText",c)},dJ=function(){var d,c;d=this.node,c=this.value,void 0===c&&(c=""),this.locked||(d.innerHTML=c)},dy=function(){var d,c;d=this.node,c=this.value,d._ractive.value=c,this.locked||(d.value=void 0==c?"":c)},dl=function(){this.locked||(this.node[this.propertyName]=this.value)},c3=function(){var e,d,f;e=this.node,d=this.name,f=this.value,this.namespace?e.setAttributeNS(this.namespace,d,f):"string"==typeof f||"number"==typeof f?e.setAttribute(d,f):f?e.setAttribute(d,""):e.removeAttribute(d)},cR=function(B,A,z,y,x,w,v,u,t,s,r,q,p,o){return function(){var e,d,c,b,a;e=this.name,d=this.element,c=this.node,"id"===e?a=t:"value"===e?"select"===d.name&&"value"===e?a=c.multiple?y:z:"textarea"===d.name?a=q:c.getAttribute("contenteditable")?a=r:"input"===d.name&&(b=d.getAttribute("type"),a="file"===b?A:"radio"===b&&d.binding&&"name"===d.binding.name?w:q):this.twoway&&"name"===e?"radio"===c.type?a=x:"checkbox"===c.type&&(a=v):"style"===e&&c.style.setAttribute?a=s:"class"!==e||c.namespaceURI&&c.namespaceURI!==B.html?this.useProperty&&(a=p):a=u,a||(a=o),this.update=a,this.update()}}(eZ,d4,gw,f1,fp,eN,eB,ep,d7,dV,dJ,dy,dl,c3),cF=function(j,i,p,o,n,m,l){var k=function(b){this.init(b)};return k.prototype={bubble:j,init:i,rebind:p,render:o,toString:n,unbind:m,update:l},k}(cY,b2,bR,bA,cA,aq,cR),co=function(b){return function(a,j){var i,h,g=[];for(i in j){j.hasOwnProperty(i)&&(h=new b({element:a,name:i,value:j[i],root:a.root}),g.push(g[i]=h))}return g}}(cF),b7=function(g){for(var f,j,i=Array.prototype.slice,h=i.call(arguments,1);j=h.shift();){for(f in j){j.hasOwnProperty(f)&&(g[f]=j[f])}}return g},bW=function(h,g,l,k,j){var i=function(b){var n,m,f;return this.element=b,this.root=b.root,this.attribute=b.attributes[this.name||"value"],n=this.attribute.interpolator,n.twowayBinding=this,n.keypath&&"${"===n.keypath.substr?(g("Two-way binding does not work with expressions: "+n.keypath),!1):(n.keypath||(n.ref&&n.resolve(n.ref),n.resolver&&n.resolver.forceResolution()),this.keypath=m=n.keypath,void (void 0===this.root.viewmodel.get(m)&&this.getInitialValue&&(f=this.getInitialValue(),void 0!==f&&this.root.viewmodel.set(m,f))))};return i.prototype={handleChange:function(){var a=this;h.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),h.scheduleTask(function(){return a.attribute.locked=!1}),h.end()},rebound:function(){var e,d,f;d=this.keypath,f=this.attribute.interpolator.keypath,d!==f&&(j(this.root._twowayBindings[d],this),this.keypath=f,e=this.root._twowayBindings[f]||(this.root._twowayBindings[f]=[]),e.push(this))},unbind:function(){}},i.extend=function(d){var c,f=this;return c=function(b){i.call(this,b),this.init&&this.init()},c.prototype=l(f.prototype),k(c.prototype,d),c.extend=i.extend,c},i}(e3,fW,fP,b7,fh),bL=function(){this._ractive.binding.handleChange()},bu=function(e,d){var f=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var b=this.element.node;b.addEventListener("change",d,!1),this.root.lazy||(b.addEventListener("input",d,!1),b.attachEvent&&b.addEventListener("keyup",d,!1))},unrender:function(){var b=this.element.node;b.removeEventListener("change",d,!1),b.removeEventListener("input",d,!1),b.removeEventListener("keyup",d,!1)},getValue:function(){return this.element.node.innerHTML}});return f}(bW,bL),bi=function(){var b={};return function(a,h,g){var f=a+h+g;return b[f]||(b[f]=[])}}(),a0=function(h,g,l,k,j){var i=l.extend({name:"checked",init:function(){this.siblings=k(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var b=this.element.node;b.addEventListener("change",j,!1),b.attachEvent&&b.addEventListener("click",j,!1)},unrender:function(){var b=this.element.node;b.removeEventListener("change",j,!1),b.removeEventListener("click",j,!1)},handleChange:function(){h.start(this.root),this.siblings.forEach(function(b){b.root.viewmodel.set(b.keypath,b.getValue())}),h.end()},getValue:function(){return this.element.node.checked},unbind:function(){g(this.siblings,this)}});return i}(e3,fh,bW,bi,bL),aO=function(g,f,j,i){var h=f.extend({name:"name",init:function(){this.siblings=i(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var b=this.element.node;b.name="{{"+this.keypath+"}}",b.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),b.addEventListener("change",j,!1),b.attachEvent&&b.addEventListener("click",j,!1)},unrender:function(){var b=this.element.node;b.removeEventListener("change",j,!1),b.removeEventListener("click",j,!1)},getValue:function(){var b=this.element.node;return b._ractive?b._ractive.value:b.value},handleChange:function(){this.element.node.checked&&f.prototype.handleChange.call(this)},rebound:function(b,n,m,l){var k;f.prototype.rebound.call(this,b,n,m,l),(k=this.element.node)&&(k.name="{{"+this.keypath+"}}")},unbind:function(){g(this.siblings,this)}});return h}(fh,bW,bL,bi),aC=function(j,i,p,o,n){function m(b){return b.isChecked}function l(b){return b.element.getAttribute("value")}var k=p.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,f,d;this.checkboxName=!0,this.siblings=o(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),d=this.siblings.noInitialValue,a=this.root.viewmodel.get(this.keypath),f=this.element.getAttribute("value"),d?(this.isChecked=this.element.getAttribute("checked"),this.isChecked&&a.push(f)):this.isChecked=j(a)?-1!==a.indexOf(f):a===f},unbind:function(){i(this.siblings,this)},render:function(){var b=this.element.node;b.name="{{"+this.keypath+"}}",b.checked=this.isChecked,b.addEventListener("change",n,!1),b.attachEvent&&b.addEventListener("click",n,!1)},unrender:function(){var b=this.element.node;b.removeEventListener("change",n,!1),b.removeEventListener("click",n,!1)},changed:function(){var b=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===b},handleChange:function(){this.isChecked=this.element.node.checked,p.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(m).map(l)}});return k}(fo,fh,bW,bi,bL),ak=function(e,d){var f=e.extend({name:"checked",render:function(){var b=this.element.node;b.addEventListener("change",d,!1),b.attachEvent&&b.addEventListener("click",d,!1)},unrender:function(){var b=this.element.node;b.removeEventListener("change",d,!1),b.removeEventListener("click",d,!1)},getValue:function(){return this.element.node.checked}});return f}(bW,bL),gJ=function(f,e,h){var g=e.extend({getInitialValue:function(){var i,d,j=this.element.options;if(d=i=j.length,i){for(;d--;){if(j[d].getAttribute("selected")){return j[d].getAttribute("value")}}for(;d++<i;){if(!j[d].getAttribute("disabled")){return j[d].getAttribute("value")}}}},render:function(){this.element.node.addEventListener("change",h,!1)},unrender:function(){this.element.node.removeEventListener("change",h,!1)},setValue:function(a){f.addViewmodel(this.root.viewmodel),this.root.viewmodel.set(this.keypath,a)},getValue:function(){var j,i,m,l,k;for(j=this.element.node.options,m=j.length,i=0;m>i;i+=1){if(l=j[i],j[i].selected){return k=l._ractive?l._ractive.value:l.value}}},forceUpdate:function(){var a=this,d=this.getValue();void 0!==d&&(this.attribute.locked=!0,f.addViewmodel(this.root.viewmodel),f.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,d))}});return g}(e3,bW,bL),gq=function(b){return function(a,f){var e;if(!b(a)||!b(f)){return !1}if(a.length!==f.length){return !1}for(e=a.length;e--;){if(a[e]!==f[e]){return !1}}return !0}}(fo),bF=function(g,f,j,i){var h=j.extend({getInitialValue:function(){return this.element.options.filter(function(b){return b.getAttribute("selected")}).map(function(b){return b.getAttribute("value")})},render:function(){var b;this.element.node.addEventListener("change",i,!1),b=this.root.viewmodel.get(this.keypath),void 0===b&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",i,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var l,k,p,o,n,m;for(l=[],k=this.element.node.options,o=k.length,p=0;o>p;p+=1){n=k[p],n.selected&&(m=n._ractive?n._ractive.value:n.value,l.push(m))}return l},handleChange:function(){var b,k,c;return b=this.attribute,k=b.value,c=this.getValue(),void 0!==k&&f(c,k)||j.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,d=this.getValue();void 0!==d&&(this.attribute.locked=!0,g.addViewmodel(this.root.viewmodel),g.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,d))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}});return h}(e3,gq,gJ,bL),bo=function(e,d){var f=e.extend({render:function(){this.element.node.addEventListener("change",d,!1)},unrender:function(){this.element.node.removeEventListener("change",d,!1)},getValue:function(){return this.element.node.files}});return f}(bW,bL),a6=function(g,f){function j(){var b;f.call(this),b=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,h),this.value=void 0==b?"":b}var i,h;return h={evaluateWrapped:!0},i=g.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var b=this.element.node;b.addEventListener("change",f,!1),this.root.lazy||(b.addEventListener("input",f,!1),b.attachEvent&&b.addEventListener("keyup",f,!1)),b.addEventListener("blur",j,!1)},unrender:function(){var b=this.element.node;b.removeEventListener("change",f,!1),b.removeEventListener("input",f,!1),b.removeEventListener("keyup",f,!1),b.removeEventListener("blur",j,!1)}})}(bW,bL),aU=function(b){return b.extend({getInitialValue:function(){return void 0},getValue:function(){var c=parseFloat(this.element.node.value);return isNaN(c)?void 0:c}})}(a6),aI=function(x,w,v,u,t,s,r,q,p,o,n){function m(b){return b&&b.isBindable}return function(a){var f,e,d,c,b=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),a.getAttribute("contenteditable")&&m(b.value)?e=w:"input"===a.name?(f=a.getAttribute("type"),"radio"===f||"checkbox"===f?(d=m(b.name),c=m(b.checked),d&&c&&x.error({message:"badRadioInputBinding"}),d?e="radio"===f?u:t:c&&(e="radio"===f?v:s)):"file"===f&&m(b.value)?e=p:m(b.value)&&(e="number"===f||"range"===f?o:n)):"select"===a.name&&m(b.value)?e=a.getAttribute("multiple")?q:r:"textarea"===a.name&&m(b.value)&&(e=n),e?new e(a):void 0}}(cw,bu,a0,aO,aC,ak,gJ,bF,bo,aU,a6),aw=function(b){this.root.fire(this.action.toString().trim(),b)},gP=function(g){function f(b){this.root.fire.apply(this.root,[this.action.toString().trim(),b].concat(this.params))}function j(d){var c=this.dynamicParams.getValue(h);"string"==typeof c&&(c=c.substr(1,c.length-2)),this.root.fire.apply(this.root,[this.action.toString().trim(),d].concat(c))}var i,h={args:!0};return g.push(function(){i=g.Fragment}),function(b,k,d){var c;this.element=b,this.root=b.root,this.name=k,this.proxies=[],c=d.n||d,"string"!=typeof c&&(c=new i({template:c,root:this.root,owner:this.element})),this.action=c,d.d?(this.dynamicParams=new i({template:d.d,root:this.root,owner:this.element}),this.fire=j):d.a&&(this.params=d.a,this.fire=f)}}(fs),gD=function(f,e,h,g){"string"!=typeof this.action&&this.action.rebind(f,e,h,g),this.dynamicParams&&this.dynamicParams.rebind(f,e,h,g)},gk=function(h,g){function l(e){var d,f;d=this._ractive,f=d.events[e.type],f.fire({node:this,original:e,index:d.index,keypath:d.keypath,context:d.root.get(d.keypath)})}function k(b){return i[b]||(i[b]=function(a){var d=a.node._ractive;a.index=d.index,a.keypath=d.keypath,a.context=d.root.get(d.keypath),d.events[b].fire(a)}),i[b]}var j={},i={};return function(){var b,a=this.name;this.node=this.element.node,(b=g.registries.events.find(this.root,a))?this.custom=b(this.node,k(a)):("on"+a in this.node||window&&"on"+a in window||j[a]||(h('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),j[a]=!0),this.node.addEventListener(a,l,!1)),this.node._ractive.events[a]=this}}(fW,dv),fC=function(){"string"!=typeof this.action&&this.action.teardown(),this.dynamicParams&&this.dynamicParams.teardown()},eT=function(){},eH=function(i,h,n,m,l,k){var j=function(e,d,f){this.init(e,d,f)};return j.prototype={fire:i,init:h,rebind:n,render:m,teardown:l,unrender:k},j}(aw,gP,gD,gk,fC,eT),ev=function(b){return function(a,n){var m,l,k,j,i=[];for(l in n){if(n.hasOwnProperty(l)){for(k=l.split("-"),m=k.length;m--;){j=new b(a,k[m],n[l]),i.push(j)}}}return i}}(eH),ej=function(h,g,l){var k,j,i;return g.push(function(){k=g.Fragment}),j={args:!0},i=function(a,n){var m,e,d,c=this;c.element=a,c.root=m=a.root,e=n.n||n,"string"!=typeof e&&(d=new k({template:e,root:m,owner:a}),e=d.toString(),d.unbind()),n.a?c.params=n.a:n.d&&(c.fragment=new k({template:n.d,root:m,owner:a}),c.params=c.fragment.getValue(j),c.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,c.params=this.getOneValue(j),c.ready&&c.update()}),c.fn=l.registries.decorators.find(m,e),c.fn||h.error({debug:m.debug,message:"missingPlugin",args:{plugin:"decorator",name:e}})},i.prototype={init:function(){var f,e,n,m=this;if(f=m.element.node,m.params?(n=[f].concat(m.params),e=m.fn.apply(m.root,n)):e=m.fn.call(m.root,f),!e||!e.teardown){throw new Error("Decorator definition must return an object with a teardown method")}m.actual=e,m.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(b){this.actual.teardown(),!b&&this.fragment&&this.fragment.unbind()}},i}(cw,fs,dv),d1=function(d){function c(f,e){for(var g=f.length;g--;){if(f[g]==e){return !0}}}return function(l){var k,j,i,b,a;k=l.node,k&&(b=d(k.options),j=l.getAttribute("value"),i=l.getAttribute("multiple"),void 0!==j?(b.forEach(function(e){var g,f;g=e._ractive?e._ractive.value:e.value,f=i?c(j,g):j==g,f&&(a=!0),e.selected=f}),a||(b[0]&&(b[0].selected=!0),l.binding&&l.binding.forceUpdate())):l.binding&&l.binding.forceUpdate())}}(bG),dP=function(d,c){return function(){var a=this;this.dirty||(this.dirty=!0,d.scheduleTask(function(){c(a),a.dirty=!1})),this.parentFragment.bubble()}}(e3,d1),dE=function(b){do{if("select"===b.name){return b}}while(b=b.parent)},ds=function(b){return function(a,d){a.select=b(a.parent),a.select.options.push(a),d.a||(d.a={}),d.a.value||d.a.hasOwnProperty("disabled")||(d.a.value=d.f),"selected" in d.a&&void 0!==a.select.getAttribute("value")&&delete d.a.selected}}(dE),c9=function(x,w,v,u,t,s,r,q,p,o,n){var m;return n.push(function(){m=n.Fragment}),function(b){var a,g,f,e,d,c;this.type=x.ELEMENT,a=this.parentFragment=b.parentFragment,g=this.template=b.template,this.parent=b.pElement||a.pElement,this.root=e=a.root,this.index=b.index,this.namespace=u(g,this.parent),this.name=f!==w.html?v(g.e):g.e,"option"===this.name&&o(this,g),"select"===this.name&&(this.options=[],this.bubble=p),this.attributes=t(this,g.a),g.f&&(this.fragment=new m({template:g.f,root:e,owner:this,pElement:this})),e.twoway&&(d=s(this,g.a))&&(this.binding=d,c=this.root._twowayBindings[d.keypath]||(this.root._twowayBindings[d.keypath]=[]),c.push(d)),g.v&&(this.eventHandlers=r(this,g.v)),g.o&&(this.decorator=new q(this,g.o)),this.intro=g.t0||g.t1,this.outro=g.t0||g.t2}}(fQ,eZ,dt,da,co,aI,ev,ej,dP,ds,fs),cX=function(b){return function(a,d){return a===d||b(a,d)}}(cZ),cL=function(d,c){return function(j,i,h,b){var a=j[i];a&&!d(a,b)&&d(a,h)&&(j[i]=c(a,h,b))}}(cX,cN),cu=function(b){return function(r,q,p,o){function n(c){c.rebind(r,q,p,o)}var m,l,k,a;if(this.attributes&&this.attributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.fragment&&n(this.fragment),k=this.liveQueries){for(a=this.root,m=k.length;m--;){k[m]._makeDirty()}}this.node&&(l=this.node._ractive)&&(b(l,"keypath",p,o),void 0!=r&&(l.index[r]=q))}}(cL),ci=function(f){var e,h,g;((e=f.getAttribute("width"))||(h=f.getAttribute("height")))&&f.node.addEventListener("load",g=function(){e&&(f.node.width=e.value),h&&(f.node.height=h.value),f.node.removeEventListener("load",g,!1)},!1)},b1=function(g,f,j){var i,h={};return j.push(function(){i=j.Fragment}),function(n,m,l){var e,d,b,a=this;return a.element=n,a.root=e=n.root,a.isIntro=l,d=m.n||m,"string"!=typeof d&&(b=new i({template:d,root:e,owner:n}),d=b.toString(),b.unbind()),a.name=d,m.a?a.params=m.a:m.d&&(b=new i({template:m.d,root:e,owner:n}),a.params=b.getValue(h),b.unbind()),a._fn=f.registries.transitions.find(e,d),a._fn?void 0:void g.error({debug:e.debug,message:"missingPlugin",args:{plugin:"transition",name:d}})}}(cw,dv,fs),bQ=function(b){return b.replace(/-([a-zA-Z])/g,function(d,c){return c.toUpperCase()})},bz=function(i,h,n,m){var l,k,j;return i?(k={},j=n("div").style,l=function(b){var g,f,d;if(b=m(b),!k[b]){if(void 0!==j[b]){k[b]=b}else{for(d=b.charAt(0).toUpperCase()+b.substring(1),g=h.length;g--;){if(f=h[g],void 0!==j[f+d]){k[b]=f+d;break}}}}return k[b]}):l=null,l}(eX,f4,eY,bQ),cz=function(h,g,l,k){var j,i;return g?(i=window.getComputedStyle||h.getComputedStyle,j=function(d){var c,o,n,m,f;if(c=i(this.node),"string"==typeof d){return f=c[k(d)],"0px"===f&&(f=0),f}if(!l(d)){throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties")}for(o={},n=d.length;n--;){m=d[n],f=c[k(m)],"0px"===f&&(f=0),o[m]=f}return o}):j=null,j}(bx,eX,fo,bz),ap=function(b){return function(a,f){var e;if("string"==typeof a){this.node.style[b(a)]=f}else{for(e in a){a.hasOwnProperty(e)&&(this.node.style[b(e)]=a[e])}}return this}}(bz),gv=function(g,f,j){function i(b){return b}var h=function(b){var a;this.duration=b.duration,this.step=b.step,this.complete=b.complete,"string"==typeof b.easing?(a=b.root.easing[b.easing],a||(g('Missing easing function ("'+b.easing+'"). You may need to download a plugin from [TODO]'),a=i)):a="function"==typeof b.easing?b.easing:i,this.easing=a,this.start=f(),this.end=this.start+this.duration,this.running=!0,j.add(this)};return h.prototype={tick:function(e){var d,k;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(d=e-this.start,k=this.easing(d/this.duration),this.step&&this.step(k),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},h}(fW,f0,fY),fZ=function(d){var c=new RegExp("^-(?:"+d.join("|")+")-");return function(b){return b.replace(c,"")}}(f4),fn=function(d){var c=new RegExp("^(?:"+d.join("|")+")([A-Z])");return function(b){var e;return b?(c.test(b)&&(b="-"+b),e=b.replace(/[A-Z]/g,function(f){return"-"+f.toLowerCase()})):""}}(f4),eM=function(L,K,J,I,H,G,F,E,D){var C,B,A,z,y,x,w,v,u={},t={};return L?(B=J("div").style,function(){void 0!==B.transition?(A="transition",z="transitionend",y=!0):void 0!==B.webkitTransition?(A="webkitTransition",z="webkitTransitionEnd",y=!0):y=!1}(),A&&(x=A+"Duration",w=A+"Property",v=A+"TimingFunction"),C=function(d,g,f,e,b){setTimeout(function(){var j,i,h,c,a;c=function(){i&&h&&(d.root.fire(d.name+":end",d.node,d.isIntro),b())},j=(d.node.namespaceURI||"")+d.node.tagName,d.node.style[w]=e.map(F).map(D).join(","),d.node.style[v]=D(f.easing||"linear"),d.node.style[x]=f.duration/1000+"s",a=function(k){var l;l=e.indexOf(I(E(k.propertyName))),-1!==l&&e.splice(l,1),e.length||(d.node.removeEventListener(z,a,!1),h=!0,c())},d.node.addEventListener(z,a,!1),setTimeout(function(){for(var n,m,k,M,s,r=e.length,N=[];r--;){M=e[r],n=j+M,y&&!t[n]&&(d.node.style[F(M)]=g[M],u[n]||(m=d.getStyle(M),u[n]=d.getStyle(M)!=g[M],t[n]=!u[n],t[n]&&(d.node.style[F(M)]=m))),(!y||t[n])&&(void 0===m&&(m=d.getStyle(M)),k=e.indexOf(M),-1===k?K("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):e.splice(k,1),s=/[^\d]*$/.exec(g[M])[0],N.push({name:F(M),interpolator:H(parseFloat(m),parseFloat(g[M])),suffix:s}))}N.length?new G({root:d.root,duration:f.duration,easing:I(f.easing||""),step:function(l){var p,o;for(o=N.length;o--;){p=N[o],d.node.style[p.name]=p.interpolator(l)+p.suffix}},complete:function(){i=!0,c()}}):i=!0,e.length||(d.node.removeEventListener(z,a,!1),h=!0,c())},0)},f.delay||0)}):C=null,C}(eX,fW,eY,bQ,di,gv,bz,fZ,fn),eA=function(r){function q(){j.hidden=document[n]}function p(){j.hidden=!0}function o(){j.hidden=!1}var n,m,l,k,j;if("undefined"!=typeof document){if(n="hidden",j={},n in document){l=""}else{for(k=r.length;k--;){m=r[k],n=m+"Hidden",n in document&&(l=m)}}void 0!==l?(document.addEventListener(l+"visibilitychange",q),q()):("onfocusout" in document?(document.addEventListener("focusout",p),document.addEventListener("focusin",o)):(window.addEventListener("pagehide",p),window.addEventListener("blur",p),window.addEventListener("pageshow",o),window.addEventListener("focus",o)),j.hidden=!1)}return j}(f4),eo=function(t,s,r,q,p,o,n){var m,l,k;return s?(l=window.getComputedStyle||t.getComputedStyle,m=function(f,d,i,g){var e,c=this;if(n.hidden){return this.setStyle(f,d),k||(k=q.resolve())}"string"==typeof f?(e={},e[f]=d):(e=f,g=i,i=d),i||(r('The "'+c.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),i=c,g=c.complete);var j=new q(function(u){var h,A,y,x,w,v,z;if(!i.duration){return c.setStyle(e),void u()}for(h=Object.keys(e),A=[],y=l(c.node),w={},v=h.length;v--;){z=h[v],x=y[p(z)],"0px"===x&&(x=0),x!=e[z]&&(A.push(z),c.node.style[p(z)]=x)}return A.length?void o(c,e,i,A,u):void u()});return g&&(r("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),j.then(g)),j}):m=null,m}(bx,eX,fW,fa,bz,eM,eA),d6=function(e,d){var f;for(f in d){!d.hasOwnProperty(f)||f in e||(e[f]=d[f])}return e},dU=function(b){return function(a,d){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),b(a,d)}}(d6),dx=function(){function b(d,c){c?d.setAttribute("style",c):(d.getAttribute("style"),d.removeAttribute("style"))}return function(){var a,f,e=this;return a=e.node=e.element.node,f=a.getAttribute("style"),e.complete=function(c){!c&&e.isIntro&&b(a,f),a._ractive.transition=null,e._manager.remove(e)},e._fn?void e._fn.apply(e.root,[e].concat(e.params)):void e.complete()}}(),dk=function(t,s,r,q,p,o,n){var m,l,k;return n.push(function(){m=n.Fragment}),l={args:!0},k=function(e,d,f){this.init(e,d,f)},k.prototype={init:t,start:o,getStyle:s,setStyle:r,animateStyle:q,processParams:p},k}(b1,cz,ap,eo,dU,dx,fs),c2=function(B,A,z,y,x,w,v,u,t,s){function r(a){var h,g,f;if(g=a.select.getAttribute("value"),void 0!==g){if(h=a.getAttribute("value"),a.select.node.multiple&&B(g)){for(f=g.length;f--;){if(h==g[f]){a.node.selected=!0;break}}}else{a.node.selected=h==g}}}function q(h){var g,l,k,j,i;g=h.root;do{for(l=g._liveQueries,k=l.length;k--;){j=l[k],i=l["_"+j],i._test(h)&&(h.liveQueries||(h.liveQueries=[])).push(i)}}while(g=g._parent)}var p,o;return p=function(){var d=this.node,c=this.fragment.toString(!1);if(d.styleSheet){d.styleSheet.cssText=c}else{for(;d.hasChildNodes();){d.removeChild(d.firstChild)}d.appendChild(document.createTextNode(c))}},o=function(){this.node.type&&"text/javascript"!==this.node.type||A("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},function(){var d,c=this,f=this.root;if(d=this.node=y(this.name,this.namespace),f.constructor.css&&this.parentFragment.getNode()===f.el&&this.node.setAttribute("data-rvcguid",f.constructor._guid),x(this.node,"_ractive",{value:{proxy:this,keypath:u(this.parentFragment),index:this.parentFragment.indexRefs,events:z(null),root:f}}),this.attributes.forEach(function(a){return a.render(d)}),this.fragment&&("script"===this.name?(this.bubble=o,this.node.text=this.fragment.toString(!1),this.fragment.unrender=w):"style"===this.name?(this.bubble=p,this.bubble(),this.fragment.unrender=w):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=w:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(b){return b.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"img"===this.name&&t(this),this.decorator&&this.decorator.fn&&v.scheduleTask(function(){c.decorator.init()}),f.transitionsEnabled&&this.intro){var e=new s(this,this.intro,!0);v.registerTransition(e),v.scheduleTask(function(){return e.start()})}return"option"===this.name&&r(this),this.node.autofocus&&v.scheduleTask(function(){return c.node.focus()}),q(this),this.node}}(fo,fW,fP,eY,gi,d4,e3,e8,ci,dk),cQ=function(g,f){function j(b){var m,l,k;if(m=b.getAttribute("value"),void 0===m){return !1}if(l=b.select.getAttribute("value"),l==m){return !0}if(b.select.getAttribute("multiple")&&f(l)){for(k=l.length;k--;){if(l[k]==m){return !0}}}}function i(l){var k,o,n,m;return k=l.attributes,o=k.type,n=k.value,m=k.name,o&&"radio"===o.value&&n&&m.interpolator&&n.value===m.interpolator.value?!0:void 0}function h(d){var c=d.toString();return c?" "+c:""}return function(){var a,c;return a="<"+(this.template.y?"!DOCTYPE":this.template.e),a+=this.attributes.map(h).join(""),"option"===this.name&&j(this)&&(a+=" selected"),"input"===this.name&&i(this)&&(a+=" checked"),a+=">",this.fragment&&(c="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(c)),g.test(this.template.e)||(a+="</"+this.template.e+">"),a}}(aF,fo),cE=function(b){return function(a){b(a.select.options,a)}}(fh),cn=function(d){function c(b){b.unbind()}return function(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),"option"===this.name&&d(this),this.attributes.forEach(c)}}(cE),b6=function(e,d){function f(h){var g,j,i;for(i=h.liveQueries.length;i--;){g=h.liveQueries[i],j=g.selector,g._remove(h.node)}}return function(h){var c,b;if("option"===this.name?this.detach():h&&(this.willDetach=!0,e.detachWhenReady(this)),this.fragment&&this.fragment.unrender(!1),(c=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,b=this.root._twowayBindings[c.keypath],b.splice(b.indexOf(c),1)),this.eventHandlers&&this.eventHandlers.forEach(function(g){return g.unrender()}),this.decorator&&this.decorator.teardown(),this.root.transitionsEnabled&&this.outro){var a=new d(this,this.outro,!1);e.registerTransition(a),e.scheduleTask(function(){return a.start()})}this.liveQueries&&f(this)}}(e3,dk),bV=function(F,E,D,C,B,A,z,y,x,w,v,u,t,s,r){var q=function(b){this.init(b)};return q.prototype={bubble:F,detach:E,find:D,findAll:C,findAllComponents:B,findComponent:A,findNextNode:z,firstNode:y,getAttribute:x,init:w,rebind:v,render:u,toString:t,unbind:s,unrender:r},q}(gl,fD,eU,eI,ew,ek,d2,dQ,dF,c9,cu,c2,cQ,cn,b6),bK=function(){function e(g,c){var h=f.exec(c)[0];return null===g||h.length<g.length?h:g}var d=/^\s*$/,f=/^\s*/;return function(j){var i,h,b,a;return i=j.split("\n"),h=i[0],void 0!==h&&d.test(h)&&i.shift(),b=i[i.length-1],void 0!==b&&d.test(b)&&i.pop(),a=i.reduce(e,null),a&&(j=i.map(function(c){return c.replace(a,"")}).join("\n")),j}}(),bt=function(g,f,j,i){function h(p,o){var n=f.registries.partials,m=n.findInstance(p,o);if(m){var l,c=m.partials[o];if("function"==typeof c&&(l=c.bind(m),l.isOwner=m.partials.hasOwnProperty(o),c=l(m.data)),!c){return void g.warn({debug:p.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:o}})}if(!j.isParsed(c)){var b=j.parse(c,j.getParseOptions(m));b.p&&g.warn({debug:p.debug,message:"noNestedPartials",args:{rname:o}});var a=l?m:n.findOwner(m,o);a.partials[o]=c=b.t}return l&&(c._fn=l),c}}return function(a,e){var d;if(d=h(a,e)){return d}if(d=j.fromId(e,{noThrow:!0})){d=i(d);var c=j.parse(d,j.getParseOptions(a));return a.partials[e]=c.t}return g.error({debug:a.debug,message:"noTemplateForPartial",args:{name:e}}),[]}}(cw,dv,eW,bK),bh=function(e,d){var f;return d?f=e.split("\n").map(function(b,g){return g?d+b:b}).join("\n"):e},aZ=function(h,g,l,k){var j,i;return k.push(function(){i=k.Fragment}),j=function(f){var b,a=this.parentFragment=f.parentFragment;if(this.type=h.PARTIAL,this.name=f.template.r,this.index=f.index,!f.template.r){throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.")}b=g(a.root,f.template.r),this.fragment=new i({template:b,root:a.root,owner:this,pElement:a.pElement})},j.prototype={bubble:function(){this.parentFragment.bubble()},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.fragment.render()},unrender:function(b){this.fragment.unrender(b)},rebind:function(f,e,n,m){return this.fragment.rebind(f,e,n,m)},unbind:function(){this.fragment.unbind()},toString:function(a){var o,n,m,c;return o=this.fragment.toString(a),n=this.parentFragment.items[this.index-1],n&&n.type===h.TEXT?(m=n.template.split("\n").pop(),(c=/^\s+$/.exec(m))?l(o,c[0]):o):o},find:function(b){return this.fragment.find(b)},findAll:function(d,c){return this.fragment.findAll(d,c)},findComponent:function(b){return this.fragment.findComponent(b)},findAllComponents:function(d,c){return this.fragment.findAllComponents(d,c)}},j}(fQ,bt,bh,fs),aN=function(g,f,j){var i;return j.push(function(){i=j.Ractive}),function h(l,k){var e,b=g.registries.components.findInstance(l,k);if(b&&(e=b.components[k],!e._parent)){var a=e.bind(b);if(a.isOwner=b.components.hasOwnProperty(k),e=a(b.data),!e){return void f.warn({debug:l.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:k}})}"string"==typeof e&&(e=h(l,e)),e._fn=a,b.components[k]=e}return e}}(dv,cw,fs),aB=function(){return this.instance.fragment.detach()},aj=function(b){return this.instance.fragment.find(b)},gI=function(d,c){return this.instance.fragment.findAll(d,c)},gp=function(d,c){c._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(d,c)},bE=function(b){return b&&b!==this.name?this.instance.fragment?this.instance.fragment.findComponent(b):null:this.instance},bn=function(){return this.parentFragment.findNextNode(this)},a5=function(){return this.rendered?this.instance.fragment.firstNode():null},aT=function(g,f){var j,i,h;return f.push(function(){j=f.Fragment}),i={parse:!0},h=function(d,c,k){this.parentFragment=d.parentFragment,this.component=d,this.key=c,this.fragment=new j({template:k,root:d.root,owner:this}),this.value=this.fragment.getValue(i)},h.prototype={bubble:function(){this.dirty||(this.dirty=!0,g.addView(this))},update:function(){var a=this.fragment.getValue(i);this.component.instance.viewmodel.set(this.key,a),g.addViewmodel(this.component.instance.viewmodel),this.value=a,this.dirty=!1},rebind:function(k,e,m,l){this.fragment.rebind(k,e,m,l)},unbind:function(){this.fragment.unbind()}},h}(e3,fs),aH=function(g,f,j,i){function h(t,s,r,q){var p,o,d,c,b,a;return d=t.root,c=t.parentFragment,"string"==typeof r?(o=f(r),o?o.value:r):null===r?!0:1===r.length&&r[0].t===g.INTERPOLATOR&&r[0].r?c.indexRefs&&void 0!==c.indexRefs[a=r[0].r]?(t.indexRefBindings[a]=s,c.indexRefs[a]):(b=j(d,r[0].r,c)||r[0].r,q.push({childKeypath:s,parentKeypath:b}),d.viewmodel.get(b)):(p=new i(t,s,r),t.complexParameters.push(p),p.value)}return function(k,e,p,o){var n,m,l={};k.complexParameters=[];for(n in p){p.hasOwnProperty(n)&&(m=h(k,n,p[n],o),(void 0!==m||void 0===e[n])&&(l[n]=m))}return l}}(fQ,a9,e5,aT),av=function(j,i,p,o){var n,m,l,k;return m=j.parentFragment,k=j.root,l={content:o||[]},n=new i({append:!0,data:p,partials:l,magic:k.magic||i.defaults.magic,modifyArrays:k.modifyArrays,_parent:k,_component:j,adapt:k.adapt})},gO=function(b){return function(a,d){d.forEach(function(h){var g,f;b(a,a.root,h.parentKeypath,h.childKeypath),g=a.instance.viewmodel.get(h.childKeypath),f=a.root.viewmodel.get(h.parentKeypath),void 0!==g&&void 0===f&&a.root.viewmodel.set(h.parentKeypath,g)})}}(e6),gC=function(d){function c(a,h,g,f){"string"!=typeof f&&d.error({debug:h.debug,message:"noComponentEventArguments"}),a.on(g,function(){var b=Array.prototype.slice.call(arguments);b.unshift(f),h.fire.apply(h,b)})}return function(b,f){var e;for(e in f){f.hasOwnProperty(e)&&c(b.instance,b.root,e,f[e])}}}(cw),gj=function(e){var d,f;for(d=e.root;d;){(f=d._liveComponentQueries["_"+e.name])&&f.push(e.instance),d=d._parent}},fA=function(i,h,n,m,l,k,j){return function(f,e){var d,c,b,a;if(d=this.parentFragment=f.parentFragment,c=d.root,this.root=c,this.type=i.COMPONENT,this.name=f.template.e,this.index=f.index,this.indexRefBindings={},this.bindings=[],!e){throw new Error('Component "'+this.name+'" not found')}a=[],b=n(this,e.defaults.data||{},f.template.a,a),m(this,e,b,f.template.f),l(this,a),k(this,f.template.v),(f.template.t1||f.template.t2||f.template.o)&&h('The "intro", "outro" and "decorator" directives have no effect on components'),j(this)}}(fQ,fW,aH,av,gO,gC,gj),eS=function(d,c){return function(p,o,n,m){var l,k,b=this.instance,a=b._parent;this.bindings.forEach(function(e){var f;e.root===a&&(f=c(e.keypath,n,m))&&e.rebind(f)}),this.complexParameters.forEach(function(e){e.rebind(p,o,n,m)}),(l=this.indexRefBindings[p])&&(d.addViewmodel(b.viewmodel),b.viewmodel.set(l,o)),(k=this.root._liveComponentQueries["_"+this.name])&&k._makeDirty()}}(e3,cN),eG=function(){var b=this.instance;return b.render(this.parentFragment.getNode()),this.rendered=!0,b.detach()},eu=function(){return this.instance.fragment.toString()},ei=function(){function d(b){b.unbind()}function c(f){var e,g;e=f.root;do{(g=e._liveComponentQueries["_"+f.name])&&g._remove(f)}while(e=e._parent)}return function(){this.complexParameters.forEach(d),this.bindings.forEach(d),c(this),this.instance.fragment.unbind()}}(),d0=function(b){this.instance.fire("teardown"),this.shouldDestroy=b,this.instance.unrender()},dO=function(B,A,z,y,x,w,v,u,t,s,r,q,p){var o=function(d,c){this.init(d,c)};return o.prototype={detach:B,find:A,findAll:z,findAllComponents:y,findComponent:x,findNextNode:w,firstNode:v,init:u,rebind:t,render:s,toString:r,unbind:q,unrender:p},o}(aB,aj,gI,gp,bE,bn,a5,fA,eS,eG,eu,ei,d0),dD=function(e,d){var f=function(a){this.type=e.COMMENT,this.value=a.template.c};return f.prototype={detach:d,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(b){b&&this.node.parentNode.removeChild(this.node)}},f}(fQ,dR),dr=function(t,s,r,q,p,o,n,m,l,k){return function(b){if("string"==typeof b.template){return new s(b)}switch(b.template.t){case t.INTERPOLATOR:return new r(b);case t.SECTION:return new q(b);case t.TRIPLE:return new p(b);case t.ELEMENT:var a;return(a=m(b.parentFragment.root,b.template.e))?new l(b,a):new o(b);case t.PARTIAL:return new n(b);case t.COMMENT:return new k(b);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(fQ,dG,eO,a1,gE,bV,aZ,aN,dO,dD),c8=function(e,d,f){return function(j){var i,c,b,a=this;if(this.owner=j.owner,i=this.parent=this.owner.parentFragment,this.root=j.root,this.pElement=j.pElement,this.context=j.context,this.owner.type===e.SECTION&&(this.index=j.index),i&&(c=i.indexRefs)){this.indexRefs=d(null);for(b in c){this.indexRefs[b]=c[b]}}this.priority=i?i.priority+1:1,j.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[j.indexRef]=j.index),"string"==typeof j.template?j.template=[j.template]:j.template||(j.template=[]),this.items=j.template.map(function(h,g){return f({parentFragment:a,pElement:j.pElement,template:h,index:g})}),this.inited=!0}}(fQ,fP,dr),cW=function(b){return function(a,h,g,f){b(this,"context",g,f),this.indexRefs&&void 0!==this.indexRefs[a]&&(this.indexRefs[a]=h),this.items.forEach(function(c){c.rebind&&c.rebind(a,h,g,f)})}}(cL),cK=function(){var b;return 1===this.items.length?b=this.items[0].render():(b=document.createDocumentFragment(),this.items.forEach(function(a){b.appendChild(a.render())})),this.rendered=!0,b},ct=function(b){return this.items?this.items.map(function(a){return a.toString(b)}).join(""):""},ch=function(){function b(c){c.unbind&&c.unbind()}return function(){this.items.forEach(b)}}(),b0=function(b){if(!this.rendered){throw new Error("Attempted to unrender a fragment that was not rendered")}this.items.forEach(function(a){return a.unrender(b)})},bP=function(J,I,H,G,F,E,D,C,B,A,z,y,x,w,v,u,t){var s=function(b){this.init(b)};return s.prototype={bubble:J,detach:I,find:H,findAll:G,findAllComponents:F,findComponent:E,findNextNode:D,firstNode:C,getNode:B,getValue:A,init:z,rebind:y,render:x,toString:w,unbind:v,unrender:u},t.Fragment=s,s}(aW,aK,ay,aa,gF,gm,fE,eV,eJ,ex,c8,cW,cK,ct,ch,b0,fs),by=function(f,e,h){var g=["template","partials","components","decorators","events"];return function(n,m){var l,d,c,b,a;if("function"!=typeof n||m?n=n||{}:(m=n,n={}),"object"!=typeof n){throw new Error("The reset method takes either no arguments, or an object containing new data")}for((d=this.viewmodel.wrapped[""])&&d.reset?d.reset(n)===!1&&(this.data=n):this.data=n,c=h.reset(this),b=c.length;b--;){if(g.indexOf(c[b]>-1)){a=!0;break}}return a?(this.viewmodel.mark(""),this.unrender(),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new e({template:this.template,root:this,owner:this})),l=this.render(this.el,this.anchor)):(l=f.start(this,!0),this.viewmodel.mark(""),f.end()),this.fire("reset",n),m&&l.then(m),l}}(e3,bP,dv),cy=function(d,c){return function(f){var b,a;d.template.init(null,this,{template:f}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(a=this.component)&&(a.shouldDestroy=!0),this.unrender(),a&&(a.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new c({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}}(dv,bP),ao=function(b){return b("reverse")}(gL),gu=function(g,f,j,i){var h=/\*/;return function(l,e,d){var c,b,a=this;if(b=g.start(this,!0),f(l)){c=l,d=e;for(l in c){c.hasOwnProperty(l)&&(e=c[l],l=j(l),this.viewmodel.set(l,e))}}else{l=j(l),h.test(l)?i(this,l).forEach(function(k){a.viewmodel.set(k,e)}):this.viewmodel.set(l,e)}return g.end(),d&&b.then(d.bind(this)),b}}(e3,fm,f6,cH),fX=function(b){return b("shift")}(gL),fl=function(b){return b("sort")}(gL),eL=function(b){return b("splice")}(gL),ez=function(b){return function(a,d){return b(this,a,void 0===d?-1:-d)}}(f9),en=function(b){return function(a){var d;return this.fire("teardown"),this.fragment.unbind(),this.viewmodel.teardown(),d=this.rendered?this.unrender():b.resolve(),a&&d.then(a.bind(this)),d}}(fa),d5=function(b){return function(a,f){var e;return"string"!=typeof a&&b.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:a}}),e=this.get(a),this.set(a,!e,f)}}(cw),dT=function(){return this.fragment.toString(!0)},dI=function(e,d,f){return function(){var c,b,a=this;if(!this.rendered){throw new Error("ractive.unrender() was called on a Ractive instance that was not rendered")}for(c=d.start(this,!0),b=!this.component||this.component.shouldDestroy,this.constructor.css&&c.then(function(){f.remove(a.constructor)});this._animations[0];){this._animations[0].stop()}return this.fragment.unrender(b),this.rendered=!1,e(this.el.__ractive_instances__,this),d.end(),c}}(fh,e3,bq),dw=function(b){return b("unshift")}(gL),dj=function(b){return function(a,f){var e;return"function"==typeof a?(f=a,a=""):a=a||"",e=b.start(this,!0),this.viewmodel.mark(a),b.end(),this.fire("update",a),f&&e.then(f.bind(this)),e}}(e3),c1=function(e,d){function f(v,u,t,s){var r,q,p,o,c,b,a=[];if(r=v._twowayBindings[u],r&&(p=r.length)){for(;p--;){o=r[p],(!o.radioName||o.element.node.checked)&&(o.checkboxName?a[o.keypath]||o.changed()||(a.push(o.keypath),a[o.keypath]=o):(c=o.attribute.value,b=o.getValue(),e(c,b)||d(c,b)||(t[u]=b)))}}if(a.length&&a.forEach(function(g){var j,i,h;j=a[g],i=j.attribute.value,h=j.getValue(),e(i,h)||(t[g]=h)}),s&&(q=v.viewmodel.depsMap["default"][u])){for(p=q.length;p--;){f(v,q[p],t,s)}}}return function(g,c){var h;return"string"!=typeof g&&(g="",c=!0),f(this,g,h={},c),this.set(h)}}(gq,e7),cP=function(bg,bf,be,bd,bc,bb,ag,af,ae,ad,ac,ab,Z,Y,X,W,U,S,Q,O,M,K,J,I,H,G,V,T,R,P,N,L){return{add:bg,animate:bf,detach:be,find:bd,findAll:bc,findAllComponents:bb,findComponent:ag,fire:af,get:ae,insert:ad,merge:ac,observe:ab,off:Z,on:Y,pop:X,push:W,render:U,reset:S,resetTemplate:Q,reverse:O,set:M,shift:K,sort:J,splice:I,subtract:H,teardown:G,toggle:V,toHTML:T,unrender:R,unshift:P,update:N,updateModel:L}}(f8,cO,cx,cl,eD,er,d9,dX,dL,dn,c5,bN,a2,aQ,gs,bH,a8,by,cy,ao,gu,fX,fl,eL,ez,en,d5,dT,dI,dw,dj,c1),cD=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d,f;return d=16*Math.random()|0,f="x"==e?d:3&d|8,f.toString(16)})},cm=function(){var b=0;return function(){return"r-"+b++}}(),b5=function(h,g,l,k){var j=h.root,i=h.keypath;return"sort"===l||"reverse"===l?void j.viewmodel.set(i,g):void (k&&j.viewmodel.splice(i,k))},bU=function(t,s,r,q,p){var o,n,m,l=[],k=["pop","push","reverse","shift","sort","splice","unshift"];return k.forEach(function(b){var a=function(){var c,u,f,e,d;for(c=r(this,b,Array.prototype.slice.call(arguments)),u=q(this,c),f=Array.prototype[b].apply(this,arguments),this._ractive.setting=!0,d=this._ractive.wrappers.length;d--;){e=this._ractive.wrappers[d],t.start(e.root),p(e,this,b,u),t.end()}return this._ractive.setting=!1,f};s(l,b,{value:a})}),o={},o.__proto__?(n=function(b){b.__proto__=l},m=function(b){b.__proto__=Array.prototype}):(n=function(b){var f,e;for(f=k.length;f--;){e=k[f],s(b,e,{value:l[e],configurable:!0})}},m=function(d){var c;for(c=k.length;c--;){delete d[k[c]]}}),n.unpatch=m,n}(e3,gi,aE,am,b5),bJ=function(h,g,l){var k,j,i;return k={filter:function(b){return g(b)&&(!b._ractive||!b._ractive.setting)},wrap:function(e,d,f){return new j(e,d,f)}},j=function(a,f,c){this.root=a,this.value=f,this.keypath=c,f._ractive||(h(f,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),l(f)),f._ractive.instances[a._guid]||(f._ractive.instances[a._guid]=0,f._ractive.instances.push(a)),f._ractive.instances[a._guid]+=1,f._ractive.wrappers.push(this)},j.prototype={get:function(){return this.value},teardown:function(){var f,c,o,n,m;if(f=this.value,c=f._ractive,o=c.wrappers,n=c.instances,c.setting){return !1}if(m=o.indexOf(this),-1===m){throw new Error(i)}if(o.splice(m,1),o.length){if(n[this.root._guid]-=1,!n[this.root._guid]){if(m=n.indexOf(this.root),-1===m){throw new Error(i)}n.splice(m,1)}}else{delete f._ractive,l.unpatch(this.value)}}},i="Something went wrong in a rather interesting way",k}(gi,fo,bU),bs=function(f,e){var h,g;return f&&(h={filter:function(i,b,a){return f.filter(i,b,a)&&e.filter(i)},wrap:function(i,d,j){return new g(i,d,j)}},g=function(i,b,a){this.value=b,this.magic=!0,this.magicWrapper=f.wrap(i,b,a),this.arrayWrapper=e.wrap(i,b,a)},g.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(b){return this.magicWrapper.reset(b)}}),h}(e1,bJ),ba=function(i,h,n,m){function l(f,e){var o,g={};if(!e){return f}e+=".";for(o in f){f.hasOwnProperty(o)&&(g[e+o]=f[o])}return g}function k(d){var c;return j[d]||(c=d?d+".":"",j[d]=function(e,b){var a;return"string"==typeof e?(a={},a[c+e]=b,a):"object"==typeof e?c?l(e,d):e:void 0}),j[d]}var j={};return function(q,p){var o,f,d,c,b=this.ractive;for(o=b.adapt.length,f=0;o>f;f+=1){if(d=b.adapt[f],"string"==typeof d){var a=i.registries.adaptors.find(b,d);if(!a){throw new Error('Missing adaptor "'+d+'"')}d=b.adapt[f]=a}if(d.filter(p,q,b)){return c=this.wrapped[q]=d.wrap(b,p,q,k(q)),c.value=p,p}}return b.magic?m.filter(p,q,b)?this.wrapped[q]=m.wrap(b,p,q):n.filter(p,q,b)&&(this.wrapped[q]=n.wrap(b,p,q)):b.modifyArrays&&h.filter(p,q,b)&&(this.wrapped[q]=h.wrap(b,p,q)),p}}(dv,bJ,e1,bs),aY=function(h){var g,l,k,j,i=[""];for(g=h.length;g--;){for(l=h[g],k=l.split(".");k.length>1;){k.pop(),j=k.join("."),-1===i.indexOf(j)&&i.push(j)}}return i},aM=function(){function d(b){var n,m,l,k,j,i="";if(!c[b]){for(l=[];i.length<b;){i+=1}for(n=parseInt(i,2),k=function(e){return"1"===e},j=0;n>=j;j+=1){for(m=j.toString(2);m.length<b;){m="0"+m}l[j]=Array.prototype.map.call(m,k)}c[b]=l}return c[b]}var c={};return function(a){var j,i,h,g;return j=a.split("."),i=d(j.length),h=function(f,e){return f?"*":j[e]},g=i.map(function(b){return b.map(h).join(".")})}}(),aA=function(g){function f(a,k,d){var c;i(a,k),d||(c=g(k),c.forEach(function(b){j(a,b,k)}))}function j(d,c,m){var l,k,e;l=d.depsMap.patternObservers,k=l[c],k&&k.forEach(function(a){var n=h.exec(a)[0];e=m?m+"."+n:n,i(d,e),j(d,a,e)})}function i(d,c){d.patternObservers.forEach(function(b){b.regex.test(c)&&b.update(c)})}var h=/[^\.]+$/;return f}(aM),ai=function(r,q){function p(b){b.update()}function o(g,f,s){var i,h;(i=m(g,f,s))&&(h=g.get(f,k),i.forEach(function(b){return b.setValue(h)}))}function n(h,f,x){function w(b){b.forEach(v),b.forEach(u)}function v(a){var c=m(h,a,x);c&&s.push({keypath:a,deps:c})}function u(a){var c;(c=h.depsMap[x][a])&&w(c)}function t(a){var d=h.get(a.keypath,k);a.deps.forEach(function(b){return b.setValue(d)})}var s=[];w(f),s.forEach(t)}function m(f,e,h){var g=f.deps[h];return g?g[e]:null}function l(d,c){c.forEach(function(a){-1===d.indexOf(a)&&d.push(a)})}var k={evaluateWrapped:!0},j=["observers","default"];return function(){var t,s,i,g,e,d=this,c=this,b=[],a={};if(this.changes.length){g=function(h){var f;(f=c.deps.computed[h])&&l(i,f)},e=function(h){var f;g(h),(f=c.depsMap.computed[h])&&f.forEach(e)};do{t=this.changes,l(b,t),this.changes=[],i=[],s=r(t),s.forEach(g),t.forEach(e),i.forEach(p)}while(this.changes.length);return s=r(b),this.patternObservers.length&&(s.forEach(function(f){return q(d,f,!0)}),b.forEach(function(f){return q(d,f)})),j.forEach(function(f){d.deps[f]&&(s.forEach(function(h){return o(d,h,f)}),n(d,b,f))}),b.forEach(function(f){a[f]=d.get(f)}),this.implicitChanges={},a}}}(aY,aA),gH=function(){this.capturing=!0,this.captured=[]},go=function(g,f){var j,i,h;if(f||(i=this.wrapped[g])&&i.teardown()!==!1&&(this.wrapped[g]=null),(h=this.computations[g])&&h.compute(),this.cache[g]=void 0,j=this.cacheMap[g]){for(;j.length;){this.clearCache(j.pop())}}},bD={FAILED_LOOKUP:!0},bm=function(f,e){var h={},g=function(b,c){this.viewmodel=b,this.root=b.ractive,this.ref=c,this.parentFragment=h,b.unresolvedImplicitDependencies[c]=!0,b.unresolvedImplicitDependencies.push(this),e.addUnresolved(this)};return g.prototype={resolve:function(){this.viewmodel.mark(this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,f(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){e.removeUnresolved(this)}},g}(fh,e3),a4=function(f,e){function h(r,q){var p,o,n,m,l,k,a;return p=q.split("."),o=p.pop(),n=p.join("."),m=r.get(n),(a=r.wrapped[n])&&(m=a.get()),null!==m&&void 0!==m?((l=r.cacheMap[n])?-1===l.indexOf(q)&&l.push(q):r.cacheMap[n]=[q],"object"!=typeof m||o in m?(k=m[o],r.adapt(q,k,!1),r.cache[q]=k,k):r.cache[q]=f):void 0}var g={};return function(p){var o=arguments[1];void 0===o&&(o=g);var n,m,d,c,b=this.ractive,a=this.cache;return void 0===a[p]?((m=this.computations[p])?n=m.value:(d=this.wrapped[p])?n=d.value:p?n=(c=this.evaluators[p])?c.value:h(this,p):(this.adapt("",b.data),n=b.data),a[p]=n):n=a[p],o.evaluateWrapped&&(d=this.wrapped[p])&&(n=d.get()),o.capture&&this.capturing&&-1===this.captured.indexOf(p)&&(this.captured.push(p),n===f&&this.unresolvedImplicitDependencies[p]!==!0&&new e(this,p)),n===f?void 0:n}}(bD,bm),aS=function(d,c){c&&(this.implicitChanges[d]=!0),-1===this.changes.indexOf(d)&&(this.changes.push(d),this.clearCache(d))},aG=function(h,g){var l,k,j,i;return l={},k=0,j=h.map(function(b,m){var f,d,c;d=k,c=g.length;do{if(f=g.indexOf(b,d),-1===f){return i=!0,-1}d=f+1}while(l[f]&&c>d);return f===k&&(k+=1),f!==m&&(i=!0),l[f]=!0,f}),j.unchanged=!i,j},au=function(h,g){function l(b){return"function"==typeof b.merge}function k(b){return JSON.stringify(b)}function j(b){if(b===!0){return k}if("string"==typeof b){return i[b]||(i[b]=function(a){return a[b]}),i[b]}if("function"==typeof b){return b}throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var i={};return function(v,u,t,s){var r,q,p,e,c,b=this;if(this.mark(v),s&&s.compare){p=j(s.compare);try{r=u.map(p),q=t.map(p)}catch(a){if(this.debug){throw a}h("Merge operation: comparison failed. Falling back to identity checking"),r=u,q=t}}else{r=u,q=t}e=g(r,q),e.forEach(function(f,d){-1===f&&b.mark(v+"."+d)}),this.set(v,t,!0),(c=this.deps["default"][v])&&c.filter(l).forEach(function(d){return d.merge(e)}),u.length!==t.length&&this.mark(v+".length",!0)}}(fW,aG),gN=function(){function b(i,h,n){var m,l,k,j;for(m=h.split(".");m.length;){m.pop(),l=m.join("."),k=i.depsMap[n]||(i.depsMap[n]={}),j=k[l]||(k[l]=[]),void 0===j[h]&&(j[h]=0,j.push(h)),j[h]+=1,h=l}}return function(a,l){var k=arguments[2];void 0===k&&(k="default");var j,i,h;l.isStatic||(j=this.deps[k]||(this.deps[k]={}),i=j[a]||(j[a]=[]),i.push(l),a&&((h=this.evaluators[a])&&(h.dependants||h.wake(),h.dependants+=1),b(this,a,k)))}}(),gB=function(){return this.capturing=!1,this.captured},gh=function(d,c){return function(v,u,t){var s,r,q,p,o,n,b,a;d(this.cache[v],u)||(o=this.computations[v],n=this.wrapped[v],b=this.evaluators[v],o&&!o.setting&&o.set(u),n&&n.reset&&(a=n.reset(u)!==!1,a&&(u=n.get())),b&&(b.value=u),o||b||a||(s=v.split("."),r=s.pop(),q=s.join("."),n=this.wrapped[q],n&&n.set?n.set(r,u):(p=n?n.get():this.get(q),p||(p=c(r),this.set(q,p,!0)),p[r]=u)),t?this.clearCache(v):this.mark(v))}}(e7,e2),fz=function(d){function c(a){return a.type===d.SECTION&&!a.inverted&&a.rendered}return function(b,j){var i,h,g=this;for(i=j.rangeStart;i<j.rangeEnd;i+=1){g.mark(b+"."+i)}j.balance&&g.mark(b+".length",!0),(h=g.deps["default"][b])&&h.filter(c).forEach(function(e){return e.splice(j)})}}(fQ),eR=function(){var d,c=this;for(Object.keys(this.cache).forEach(function(b){return c.clearCache(b)});d=this.unresolvedImplicitDependencies.pop();){d.teardown()}},eF=function(){function b(i,h,n){var m,l,k,j;for(m=h.split(".");m.length;){m.pop(),l=m.join("."),k=i.depsMap[n],j=k[l],j[h]-=1,j[h]||(j.splice(j.indexOf(h),1),j[h]=void 0),h=l}}return function(a,l){var k=arguments[2];void 0===k&&(k="default");var j,i,h;if(!l.isStatic){if(j=this.deps[k][a],i=j.indexOf(l),-1===i){throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks")}j.splice(i,1),a&&((h=this.evaluators[a])&&(h.dependants-=1,h.dependants||h.sleep()),b(this,a,k))}}}(),et=function(){function d(b){var e="var __ractive=this;return("+b.replace(c,function(g,f){return'__ractive.get("'+f+'")'})+")";return new Function(e)}var c=/\$\{([^\}]+)\}/g;return function(a){return"function"==typeof a?{get:a}:"string"==typeof a?{get:d(a)}:("object"==typeof a&&"string"==typeof a.get&&(a={get:d(a.get),set:a.set}),a)}}(),eh=function(f,e,h){var g=function(i,d,j){this.ractive=i,this.viewmodel=i.viewmodel,this.key=d,this.getter=j.get,this.setter=j.set,this.dependencies=[],this.update()};return g.prototype={set:function(b){if(this.setting){return void (this.value=b)}if(!this.setter){throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)")}this.setter.call(this.ractive,b)},compute:function(){var a,j,i;a=this.ractive,a.viewmodel.capture();try{this.value=this.getter.call(a)}catch(c){f.warn({debug:a.debug,message:"failedComputation",args:{key:this.key,err:c.message||c}}),j=!0}return i=a.viewmodel.release(),h(this,this.dependencies,i),j?!1:!0},update:function(){var b=this.value;this.compute()&&!e(this.value,b)&&this.ractive.viewmodel.mark(this.key)}},g}(cw,e7,ck),dZ=function(d,c){return function(h,g){var b,a;for(b in g){a=d(g[b]),h.viewmodel.computations[b]=new c(h,b,a)}}}(et,eh),dN=function(){function d(b){return"string"==typeof b&&(b=[b]),b}var c={lookup:function(g,f){var j,i=g.adapt;if(!i||!i.length){return i}if(f&&Object.keys(f).length&&(j=i.length)){for(;j--;){var h=i[j];"string"==typeof h&&(i[j]=f[h]||h)}}return i},combine:function(a,e){return a=d(a),e=d(e),a&&a.length?e&&e.length?(a.forEach(function(b){-1===e.indexOf(b)&&e.push(b)}),e):a.slice():e}};return c}(),dC=function(L,K,J,I,H,G,F,E,D,C,B,A,z,y,x,w){var v;try{Object.defineProperty({},"openMainContainer",{value:0})}catch(u){v=!0}var t=function(a){this.ractive=a,t.extend(a.constructor,a),this.cache={},this.cacheMap=L(null),this.deps={computed:{},"default":{}},this.depsMap={computed:{},"default":{}},this.patternObservers=[],this.wrapped=L(null),this.evaluators=L(null),this.computations=L(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={}};return t.extend=function(d,c){if(c.magic&&v){throw new Error("Getters and setters (magic mode) are not supported in this browser")}c.adapt=w.combine(d.prototype.adapt,c.adapt)||[],c.adapt=w.lookup(c,c.adaptors)},t.prototype={adapt:K,applyChanges:J,capture:I,clearCache:H,get:G,mark:F,merge:E,register:D,release:C,set:B,splice:A,teardown:z,unregister:y,compute:function(){x(this.ractive,this.ractive.computed)}},t}(fP,ba,ai,gH,go,a4,aS,au,gN,gB,gh,fz,eR,eF,dZ,dN),dq=function(j,i,p,o,n,m){function l(f){var c;if(c=p(f.el)){var h=f.transitionsEnabled;if(f.noIntro&&(f.transitionsEnabled=!1),c&&!f.append){if(c.__ractive_instances__){try{c.__ractive_instances__.splice(0,c.__ractive_instances__.length).forEach(function(b){return b.teardown()})}catch(g){}}c.innerHTML=""}f.render(c,f.append),f.transitionsEnabled=h}}function k(b,d){b._guid=o(),b._subs=i(null),b._config={},b._twowayBindings=i(null),b._animations=[],b.nodes={},b._liveQueries=[],b._liveComponentQueries=[],d._parent&&d._component&&(b._parent=d._parent,b.component=d._component,d._component.instance=b)}return function(a){var d=arguments[1];void 0===d&&(d={}),k(a,d),j.init(a.constructor,a,d),a.viewmodel=new n(a),a.viewmodel.compute(),a.template&&(a.fragment=new m({template:a.template,root:a,owner:a})),a.viewmodel.applyChanges(),l(a)}}(dv,fP,dA,cm,dC,bP),c7=function(b){return function(a,f,e){a.beforeInit&&a.beforeInit(e),b(a,e)}}(dq),cV=function(v,u,t,s){function r(a,j,i){for(var h in i){if(!(h in n)&&i.hasOwnProperty(h)){var g=i[h];"function"==typeof g&&(g=v(a,h,g)),j[h]=g}}}function q(b){if(!(b.prototype instanceof o)){return b}for(var d={};b;){l.forEach(function(a){p(a.useDefaults?b.prototype:b,d,a.name)}),Object.keys(b.prototype).forEach(function(i){if("computed"!==i){var h=b.prototype[i];if(i in d){if("function"==typeof d[i]&&"function"==typeof h&&d[i]._method){var c,a=h._method;a&&(h=h._method),c=u(d[i]._method,h),a&&(c._method=c),d[i]=c}}else{d[i]=h._method?h._method:h}}}),b=b._parent!==o?b._parent:!1}return d}function p(g,f,j){var i,h=Object.keys(g[j]);h.length&&((i=f[j])||(i=f[j]={}),h.filter(function(b){return !(b in i)}).forEach(function(a){return i[a]=g[j][a]}))}var o,n={_parent:!0,_component:!0},m={toPrototype:r,toOptions:q},l=t.registries;return t.keys.forEach(function(b){return n[b]=!0}),s.push(function(){o=s.Ractive}),m}(dS,fT,dv,fs),cJ=function(j,i,p,o,n,m,l){return function k(){var e=arguments[0];void 0===e&&(e={});var d,c,b,a=this;return e=l.toOptions(e),d=function(f){n(this,d,f)},c=j(a.prototype),c.constructor=d,b={_guid:{value:p()},defaults:{value:c},extend:{value:k,writable:!0,configurable:!0},_parent:{value:a}},i(d,b),o.extend(a,c,e),m.extend(a,c),l.toPrototype(a.prototype,c,e),d.prototype=c,d}}(fP,ga,cD,dv,c7,dC,cV),cs=function(F,E,D,C,B,A,z,y,x,w,v,u,t){var s,r;for(s=function(b){u(this,b)},r={extend:{value:w},parse:{value:v},Promise:{value:y},svg:{value:C},magic:{value:B},VERSION:{value:"0.5.4"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:E},events:{writable:!0,value:{}},interpolators:{writable:!0,value:D},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},A(s,r),s.prototype=x(z,F),s.prototype.constructor=s,s.defaults=s.prototype,t.Ractive=s;t.length;){t.pop()()}var q="function";if(typeof Date.now!==q||typeof String.prototype.trim!==q||typeof Object.keys!==q||typeof Array.prototype.indexOf!==q||typeof Array.prototype.forEach!==q||typeof Array.prototype.map!==q||typeof Array.prototype.filter!==q||"undefined"!=typeof window&&typeof window.addEventListener!==q){throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.")}return s}(fw,fu,fj,fi,e0,ga,cP,fa,b7,cJ,gG,dq,fs);"undefined"!=typeof module&&module.exports?module.exports=cs:"function"==typeof define&&define.amd&&define(function(){return cs}),fy.Ractive=cs,cs.noConflict=function(){return fy.Ractive=fx,cs}}("undefined"!=typeof window?window:this);